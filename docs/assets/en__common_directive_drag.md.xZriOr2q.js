import{_ as i,o as e,c as a,ah as t}from"./chunks/framework.PKn7PQPU.js";const g=JSON.parse('{"title":"Drag Directive","description":"","frontmatter":{},"headers":[],"relativePath":"en/_common/directive/drag.md","filePath":"en/_common/directive/drag.md"}'),n={name:"en/_common/directive/drag.md"};function l(o,s,d,r,h,p){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="drag-directive" tabindex="-1">Drag Directive <a class="header-anchor" href="#drag-directive" aria-label="Permalink to &quot;Drag Directive&quot;">​</a></h1><p><code>v-tui-drag</code> is a general-purpose drag enhancement directive in TechUI. It allows developers to turn any DOM element into a draggable state via a configuration object. This directive not only supports conventional absolute positioning dragging but is also deeply optimized for the <code>transform</code> performance mode and features built-in coordinate correction logic for large-screen scaling scenarios (Adaptive).</p><h2 id="core-features" tabindex="-1">Core Features <a class="header-anchor" href="#core-features" aria-label="Permalink to &quot;Core Features&quot;">​</a></h2><ul><li><strong>Dual Mode Positioning:</strong> Supports two movement modes: <code>transform</code> (GPU accelerated, default) and <code>style.left/top</code> (Absolute positioning).</li><li><strong>Fine-grained Control:</strong> Supports specifying a drag handle (<code>trigger</code>) and excluded areas (<code>exclude</code>).</li><li><strong>Boundary Constraints:</strong> Automatically restricts element movement within the parent container&#39;s scope (<code>containment</code>).</li><li><strong>Scale Adaptation:</strong> Built-in <code>inAdpt</code> parameter to solve the issue of desynchronization between mouse displacement and element movement under the large-screen <code>scale</code> mode.</li></ul><h2 id="basic-usage" tabindex="-1">Basic Usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to &quot;Basic Usage&quot;">​</a></h2><p>The simplest usage is to bind the directive directly. It enables <code>containment</code> and uses <code>transform</code> for movement by default.</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;box&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-tui-drag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Drag Me</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="api-reference" tabindex="-1">API Reference <a class="header-anchor" href="#api-reference" aria-label="Permalink to &quot;API Reference&quot;">​</a></h2><p><code>v-tui-drag</code> accepts an object as a parameter, supporting the following configuration options:</p><table tabindex="0"><thead><tr><th>Parameter Name</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong>enabled</strong></td><td><strong>Enable Switch</strong>. Controls whether dragging is allowed. It automatically handles cursor styles when dynamically switched.</td><td><code>Boolean</code></td><td><code>true</code></td></tr><tr><td><strong>trigger</strong></td><td><strong>Drag Handle</strong>. CSS selector string. Dragging is triggered only when the mouse is pressed on the specified child element (e.g., allow dragging only by holding the title bar).</td><td><code>String</code></td><td><code>el</code> (Self)</td></tr><tr><td><strong>exclude</strong></td><td><strong>Excluded Area</strong>. CSS selector string. Elements located inside the trigger that <strong>do not trigger</strong> dragging (e.g., the close button on the title bar).</td><td><code>String</code></td><td>—</td></tr><tr><td><strong>containment</strong></td><td><strong>Boundary Constraint</strong>. Whether to restrict the element within the visible range of the parent container.</td><td><code>Boolean</code></td><td><code>true</code></td></tr><tr><td><strong>positionType</strong></td><td><strong>Positioning Mode</strong>. Options: <code>&#39;transform&#39;</code> or <code>&#39;absolute&#39;</code>/<code>&#39;fixed&#39;</code>. <br><code>&#39;transform&#39;</code>: Modifies CSS Translate, better performance, does not break document flow. <br><code>&#39;absolute&#39;</code>: Modifies left/top, suitable for traditional positioning layouts.</td><td><code>String</code></td><td><code>&#39;transform&#39;</code></td></tr><tr><td><strong>inAdpt</strong></td><td><strong>Scale Correction</strong>. Whether it is inside a TechUI scaling adaptive container. When enabled, it corrects mouse coordinates based on the global <code>tDom.adpt.info</code> to prevent drag drift.</td><td><code>Boolean</code></td><td><code>false</code></td></tr><tr><td><strong>resetOnDisable</strong></td><td><strong>Reset on Disable</strong>. Whether to clear the element&#39;s <code>style</code> attributes (e.g., reset position) when <code>enabled</code> becomes <code>false</code>.</td><td><code>Boolean</code></td><td><code>false</code></td></tr><tr><td><strong>uid</strong></td><td><strong>Event ID</strong>. Used to distinguish different event listeners. Recommended to pass a unique ID in complex scenarios.</td><td><code>String</code></td><td>—</td></tr></tbody></table><h2 id="typical-cases" tabindex="-1">Typical Cases <a class="header-anchor" href="#typical-cases" aria-label="Permalink to &quot;Typical Cases&quot;">​</a></h2><p>Here are typical use cases for the <code>v-tui-drag</code> directive in the TechUI component library.</p><h3 id="dialog-component-dialog" tabindex="-1">Dialog Component (Dialog) <a class="header-anchor" href="#dialog-component-dialog" aria-label="Permalink to &quot;Dialog Component (Dialog)&quot;">​</a></h3><p>This is the most classic usage scenario. Usually, we want:</p><ul><li>The user can only drag by holding the <strong>Title Bar (<code>.dialog-header</code>)</strong>.</li><li>Clicking the <strong>Close Button (<code>.dialog-close</code>)</strong> does not trigger dragging.</li><li>Dragging is disabled in Fullscreen mode (<code>fullscreen</code>).</li><li>Restrict the dialog from being dragged out of the visible area.</li></ul><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog-inner&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-tui-drag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      enabled: draggable &amp;&amp; !fullscreen, // Disable when fullscreen or configured as not draggable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      trigger: &#39;.dialog-header&#39;,         // Only the title bar is draggable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      exclude: &#39;.dialog-close&#39;,          // Exclude the close button to prevent accidental triggering</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      containment: true,                 // Restrict within the parent container</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      positionType: &#39;absolute&#39;,          // Use absolute positioning mode (matches dialog CSS)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      inAdpt: isInsideAdaptiveBox,       // Enable correction if inside a scaling container</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      uid: uniqueId</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog-header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Title&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog-close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;X&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog-content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="global-adaptive-container-adaptive-container" tabindex="-1">Global Adaptive Container (Adaptive Container) <a class="header-anchor" href="#global-adaptive-container-adaptive-container" aria-label="Permalink to &quot;Global Adaptive Container (Adaptive Container)&quot;">​</a></h3><p>In data dashboard or editor scenarios, you may need to drag the entire canvas.</p><ul><li>Use <code>positionType: &#39;transform&#39;</code> here to get the best rendering performance.</li><li>Enable <code>resetOnDisable: true</code> to automatically reset the position when the canvas is locked.</li></ul><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tuiAdptOuter&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-tui-drag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      enabled: state.dragable,       // Controlled by state whether it is draggable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      trigger: &#39;#tuiAdpt&#39;,           // The entire area serves as the handle</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      resetOnDisable: true,          // Reset transform position when disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      containment: false,            // No boundary restriction, allow dragging out of view</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      positionType: &#39;transform&#39;,     // Use GPU acceleration for movement</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      inAdpt: false,                 // It is the adaptive layer itself, no need for correction</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      uid: &#39;adpt-drag-001&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="technical-details" tabindex="-1">Technical Details <a class="header-anchor" href="#technical-details" aria-label="Permalink to &quot;Technical Details&quot;">​</a></h2><h3 id="coordinate-calculation-logic" tabindex="-1">Coordinate Calculation Logic <a class="header-anchor" href="#coordinate-calculation-logic" aria-label="Permalink to &quot;Coordinate Calculation Logic&quot;">​</a></h3><p>The directive implements complex coordinate calculation internally via <code>drag.js</code>:</p><ol><li><strong>Get Start Position</strong> (<code>getStartPosition</code>):</li></ol><ul><li><strong>Transform Mode</strong>: Parses <code>window.getComputedStyle(el).transform</code> matrix (<code>DOMMatrix</code>) to get the current translate X/Y.</li><li><strong>Position Mode</strong>: Calculates the offset of <code>el.getBoundingClientRect()</code> relative to <code>offsetParent</code>.</li></ul><ol start="2"><li><strong>Movement Delta</strong>: Calculates <code>e.clientX - mouseStartX</code>. If <code>inAdpt</code> is enabled, the delta is divided by the global scale factors (<code>scaleX</code>, <code>scaleY</code>) to ensure the mouse stays synchronized with the element in a scaled page.</li><li><strong>Boundary Collision</strong> (<code>containCalcTrans</code>/<code>containCalcPos</code>): Pre-calculates the minimum and maximum allowed X/Y values and performs numerical clamping (Clamp) during <code>mousemove</code>.</li></ol>`,26)])])}const k=i(n,[["render",l]]);export{g as __pageData,k as default};
