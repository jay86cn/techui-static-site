import{_ as p,C as t,o as h,c as d,j as i,a,E as n,ah as e,w as k}from"./chunks/framework.PKn7PQPU.js";const F=JSON.parse('{"title":"View Transitions","description":"","frontmatter":{},"headers":[],"relativePath":"en/_common/support/viewTrans.md","filePath":"en/_common/support/viewTrans.md"}'),g={name:"en/_common/support/viewTrans.md"},c={tabindex:"0"};function u(E,s,m,y,f,b){const l=t("AbsTag"),o=t("Primary"),r=t("LinkItem");return h(),d("div",null,[s[13]||(s[13]=i("h1",{id:"view-transitions",tabindex:"-1"},[a("View Transitions "),i("a",{class:"header-anchor",href:"#view-transitions","aria-label":'Permalink to "View Transitions"'},"​")],-1)),n(l,{types:"star"}),s[14]||(s[14]=e(`<p>TechUI encapsulates a high-performance view transition system based on the modern browser-native View Transitions API. It automatically captures interface snapshots and executes cinema-grade transition animations during route navigation, theme switching, or arbitrary DOM updates.</p><p>It is a global transition animation tool capable of achieving the following functions:</p><ul><li>Route switching transition animations <ul><li>Supports ordered switching (combined with route <code>Order</code> parameters to achieve effects like left flip, right flip, etc.)</li><li>Supports disordered switching</li></ul></li><li>Theme switching transition animations</li><li>Local switching animations (e.g., specific DOM containers)</li></ul><h2 id="compatibility-note" tabindex="-1">Compatibility Note <a class="header-anchor" href="#compatibility-note" aria-label="Permalink to &quot;Compatibility Note&quot;">​</a></h2><p>Since this feature uses the <code>document.startViewTransition</code> API, it is only supported by <strong>Chromium-based</strong> browsers (e.g., Chrome 111+, Edge 111+).</p><p>In unsupported browsers (such as Firefox, Safari), the system will automatically handle graceful degradation: status updates or route jumps will be executed directly without playing transition animations, ensuring business logic runs normally.</p><h2 id="core-usage" tabindex="-1">Core Usage <a class="header-anchor" href="#core-usage" aria-label="Permalink to &quot;Core Usage&quot;">​</a></h2><p>In components, you can obtain core transition-related methods by injecting <code>$global</code>.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { inject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Route navigation transition</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  themeToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Theme toggle transition</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  viewTransToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Manually configure transition parameters</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  viewTransStart</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Manually trigger transition</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="route-navigation-routertransition" tabindex="-1">Route Navigation (routerTransition) <a class="header-anchor" href="#route-navigation-routertransition" aria-label="Permalink to &quot;Route Navigation (routerTransition)&quot;">​</a></h3><p>This is the most commonly used method, intended to replace Vue Router&#39;s <code>router.push</code>, adding animation effects to page transitions.</p><p><strong>Basic Usage</strong>:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Navigate to the dashboard using the default animation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><p><strong>Specify Animation Effect</strong>:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  transName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vt-ripple&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Specify ripple effect</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  transDur: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // Animation duration 1.5s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>Automatic Direction Based on Order</strong>: If an order index is defined in the route configuration (<code>meta.order</code>), enabling <code>useOrder</code> allows the system to automatically determine whether to play a &quot;forward&quot; or &quot;backward&quot; animation.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// If current order: 1, target order: 2, play forward animation (vt-slide-left)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// If current order: 2, target order: 1, play backward animation (vt-slide-right)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/detail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  useOrder: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>API Parameter Table</strong>:</p>`,18)),i("table",c,[s[12]||(s[12]=i("thead",null,[i("tr",null,[i("th",null,"Parameter Name"),i("th",null,"Type"),i("th",null,"Default"),i("th",null,"Description")])],-1)),i("tbody",null,[s[7]||(s[7]=i("tr",null,[i("td",null,[i("strong",null,"path")]),i("td",null,"String"),i("td",null,"-"),i("td",null,"Target route path (Required).")],-1)),i("tr",null,[i("td",null,[s[1]||(s[1]=i("strong",null,"query",-1)),s[2]||(s[2]=a()),s[3]||(s[3]=i("br",null,null,-1)),n(o,{size:"s"},{default:k(()=>[...s[0]||(s[0]=[a("V0.0.5+",-1)])]),_:1})]),s[4]||(s[4]=i("td",null,"Object",-1)),s[5]||(s[5]=i("td",null,"-",-1)),s[6]||(s[6]=i("td",null,"Route query parameters.",-1))]),s[8]||(s[8]=i("tr",null,[i("td",null,[i("strong",null,"transName")]),i("td",null,"String"),i("td",null,[i("code",null,"null")]),i("td",null,"Specify animation name (see list below). If empty, default config is used.")],-1)),s[9]||(s[9]=i("tr",null,[i("td",null,[i("strong",null,"transTarget")]),i("td",null,"String"),i("td",null,[i("code",null,"null")]),i("td",null,[a("Animation target (e.g., "),i("code",null,"'root'"),a(", "),i("code",null,"'layout'"),a(").")])],-1)),s[10]||(s[10]=i("tr",null,[i("td",null,[i("strong",null,"transDur")]),i("td",null,"Number"),i("td",null,[i("code",null,"null")]),i("td",null,"Animation duration (seconds).")],-1)),s[11]||(s[11]=i("tr",null,[i("td",null,[i("strong",null,"useOrder")]),i("td",null,"Boolean"),i("td",null,[i("code",null,"false")]),i("td",null,[a("Whether to automatically determine animation direction based on "),i("code",null,"meta.order"),a(".")])],-1))])]),s[15]||(s[15]=e(`<h3 id="theme-toggle-themetoggle" tabindex="-1">Theme Toggle (themeToggle) <a class="header-anchor" href="#theme-toggle-themetoggle" aria-label="Permalink to &quot;Theme Toggle (themeToggle)&quot;">​</a></h3><p>TechUI includes a built-in encapsulation for theme switching transitions. When you call this method, the system will play a circular diffusion (or other configured) animation centered on the current click position.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Switch to dark blue theme</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">themeToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;darkBlue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dark&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="custom-transitions" tabindex="-1">Custom Transitions <a class="header-anchor" href="#custom-transitions" aria-label="Permalink to &quot;Custom Transitions&quot;">​</a></h3><p>If you need to use transition animations in non-routing, non-theme-switching scenarios (such as manually updating specific DOM node content), you can combine <code>viewTransToggle</code> and <code>viewTransStart</code>.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleUpdate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 1. Configure animation params: acts on root node, uses dissolve effect, duration 0.5s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  viewTransToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vt-dissolve&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 2. Wait for DOM updates to be ready</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> nextTick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 3. Start transition</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  viewTransStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Execute actual DOM update operations in the callback</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      showDetail.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Force enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Callback after animation completes, usually used to reset parameters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      viewTransToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h2 id="global-configuration" tabindex="-1">Global Configuration <a class="header-anchor" href="#global-configuration" aria-label="Permalink to &quot;Global Configuration&quot;">​</a></h2><p>You can control the global switch for the transition feature in <code>$globalConfig</code>.</p><ul><li><strong><code>transition</code></strong>: <code>Boolean</code></li><li><code>true</code>: Enable transition animations (Default).</li><li><code>false</code>: Disable globally; all <code>routerTransition</code> calls will jump directly without animation.</li></ul><h2 id="animation-effect-list" tabindex="-1">Animation Effect List <a class="header-anchor" href="#animation-effect-list" aria-label="Permalink to &quot;Animation Effect List&quot;">​</a></h2><p>TechUI provides a rich set of preset animation effects. You can use these names directly in the <code>transName</code> parameter.</p><h3 id="geometric-mask" tabindex="-1">Geometric/Mask <a class="header-anchor" href="#geometric-mask" aria-label="Permalink to &quot;Geometric/Mask&quot;">​</a></h3><p>Suitable for large-scale scene switching or theme toggling.</p><ul><li><strong><code>vt-overlap</code></strong>: Overlap zoom (Default general effect).</li><li><strong><code>vt-circle</code></strong>: Circular diffusion (Center).</li><li><strong><code>vt-circle-rt</code></strong>: Circular diffusion (Top Right).</li><li><strong><code>vt-circle-tc</code></strong>: Circular diffusion (Top Center).</li><li><strong><code>vt-ripple</code></strong>: Ripple diffusion.</li></ul><h3 id="fade-dissolve" tabindex="-1">Fade/Dissolve <a class="header-anchor" href="#fade-dissolve" aria-label="Permalink to &quot;Fade/Dissolve&quot;">​</a></h3><p>Suitable for content updates or gentle page transitions.</p><ul><li><strong><code>vt-fade</code></strong>: Standard fade in/out.</li><li><strong><code>vt-dissolve</code></strong>: Dissolve transition.</li></ul><h3 id="slide" tabindex="-1">Slide <a class="header-anchor" href="#slide" aria-label="Permalink to &quot;Slide&quot;">​</a></h3><p>Suitable for page transitions with spatial hierarchy relationships.</p><ul><li><strong><code>vt-slide-up</code></strong>: Slide in up.</li><li><strong><code>vt-slide-down</code></strong>: Slide in down.</li><li><strong><code>vt-slide-left</code></strong>: Slide in left (Usually for &quot;Forward&quot;).</li><li><strong><code>vt-slide-right</code></strong>: Slide in right (Usually for &quot;Back&quot;).</li></ul><h3 id="flip" tabindex="-1">Flip <a class="header-anchor" href="#flip" aria-label="Permalink to &quot;Flip&quot;">​</a></h3><p>Suitable for card flips or special display effects.</p><ul><li><strong><code>vt-flip-up</code></strong>: Flip up.</li><li><strong><code>vt-flip-down</code></strong>: Flip down.</li><li><strong><code>vt-flip-left</code></strong>: Flip left.</li><li><strong><code>vt-flip-right</code></strong>: Flip right.</li></ul><h2 id="acknowledgements-credits" tabindex="-1">Acknowledgements &amp; Credits <a class="header-anchor" href="#acknowledgements-credits" aria-label="Permalink to &quot;Acknowledgements &amp; Credits&quot;">​</a></h2>`,24)),n(r,{icon:"qdly",ext:"jpg",label:"Frontend Eagle (前端老鹰)",detail:"BiliBili",link:"[https://space.bilibili.com/397874328](https://space.bilibili.com/397874328)"}),s[16]||(s[16]=i("p",null,`The concept for global transition effects first sprouted from some technical blogs but was put on hold. It wasn't until I stumbled upon a share by "Frontend Eagle" that I was truly motivated to implement it, initially applying it to TechUI's theme switching feature.`,-1)),s[17]||(s[17]=i("p",null,`As development deepened, I realized this effect shouldn't be limited to "skin changing." Through further abstraction and encapsulation, I upgraded it into a powerful general-purpose component. Now, it not only handles complex theme switching but also perfectly supports directional route navigation, Vue component switching, and various local animation needs via rich configuration options.`,-1)),s[18]||(s[18]=i("p",null,[a("Click here to view the original video explanation "),i("a",{href:"https://www.bilibili.com/video/BV1YVHazJEwa",target:"_blank",rel:"noreferrer"},"Frontend Eagle - Theme Switching Animation Effect"),a(".")],-1))])}const C=p(g,[["render",u]]);export{F as __pageData,C as default};
