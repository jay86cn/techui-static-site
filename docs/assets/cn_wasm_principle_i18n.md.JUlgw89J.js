import{_ as o,o as a,c as t,ah as r}from"./chunks/framework.PKn7PQPU.js";const u=JSON.parse('{"title":"多语言","description":"","frontmatter":{},"headers":[],"relativePath":"cn/wasm/principle/i18n.md","filePath":"cn/wasm/principle/i18n.md"}'),n={name:"cn/wasm/principle/i18n.md"};function s(i,e,l,c,d,g){return a(),t("div",null,[...e[0]||(e[0]=[r('<h1 id="多语言" tabindex="-1">多语言 <a class="header-anchor" href="#多语言" aria-label="Permalink to &quot;多语言&quot;">​</a></h1><p><strong>INFO 模块</strong> 是 TechUI Core 的“喉舌”。它负责管理 Wasm 内部的所有文案输出，确保授权状态、错误警告及法律声明能够以正确的语言、准确无误地传达给开发者或最终用户。</p><p>与常规的前端 i18n 框架（如 <code>vue-i18n</code>）不同，TechUI Core 的多语言系统是<strong>独立且封闭</strong>的，旨在确保关键信息的不可篡改性。</p><h2 id="核心机制" tabindex="-1">核心机制 <a class="header-anchor" href="#核心机制" aria-label="Permalink to &quot;核心机制&quot;">​</a></h2><h3 id="静态字典构建" tabindex="-1">静态字典构建 <a class="header-anchor" href="#静态字典构建" aria-label="Permalink to &quot;静态字典构建&quot;">​</a></h3><p>多语言数据结构在 Rust 层面通过 <code>HashMap</code> 构建，并在编译阶段被硬编码进 <code>.wasm</code> 二进制文件中。</p><ul><li><strong>内存驻留</strong>：字典在模块初始化时加载至线性内存，随后的每一次文案读取均为纳秒级的内存寻址操作。</li><li><strong>按需编译</strong>：利用 Rust 的 <code>#[cfg]</code> 特性，不同版本的组件库（Prime/Base/Scifi）仅包含其对应的文案集。例如，免费版组件库中物理上不存在付费版的授权提示文案，从而减小了模块体积。</li></ul><h3 id="语言同步逻辑" tabindex="-1">语言同步逻辑 <a class="header-anchor" href="#语言同步逻辑" aria-label="Permalink to &quot;语言同步逻辑&quot;">​</a></h3><p>Wasm 模块不直接监听浏览器的语言变化，而是通过 <strong>会话存储 (Session Storage)</strong> 与宿主环境保持同步。</p><ol><li><strong>读取</strong>：Wasm 初始化时，会自动读取 <code>sessionStorage</code> 中的 <code>sysLang</code> 参数。</li><li><strong>匹配</strong>：支持 <code>cn</code> (简体), <code>hk</code> (繁体), <code>en</code> (英文) 三种标准代码。</li><li><strong>回退</strong>：若参数缺失或不支持，默认回退至 <code>cn</code> (或根据构建配置决定)。</li></ol><h2 id="文案分类" tabindex="-1">文案分类 <a class="header-anchor" href="#文案分类" aria-label="Permalink to &quot;文案分类&quot;">​</a></h2><p>INFO 模块管理的文案主要分为以下三类：</p><h3 id="🎫-授权与状态-licensing-status" tabindex="-1">🎫 授权与状态 (Licensing Status) <a class="header-anchor" href="#🎫-授权与状态-licensing-status" aria-label="Permalink to &quot;🎫 授权与状态 (Licensing Status)&quot;">​</a></h3><p>最核心的反馈信息，用于明确当前的授权等级。</p><ul><li><strong>免费/付费区分</strong>：明确提示当前是“免费版”、“体验模式”还是“正式授权”。</li><li><strong>有效期提示</strong>：如 <code>距离到期 [XX] 天</code> 或 <code>永久有效</code>。</li><li><strong>授权链路</strong>：展示 <code>本许可证由 [授权方] 授权给 [被授权方]</code> 的完整法律链路。</li></ul><h3 id="🛡️-错误与熔断-errors-meltdown" tabindex="-1">🛡️ 错误与熔断 (Errors &amp; Meltdown) <a class="header-anchor" href="#🛡️-错误与熔断-errors-meltdown" aria-label="Permalink to &quot;🛡️ 错误与熔断 (Errors &amp; Meltdown)&quot;">​</a></h3><p>当 VALID 模块检测到异常时，调用此类文案进行控制台告警。</p><ul><li><strong>环境错误</strong>：如 <code>当前域名与许可证限定域名不匹配</code>、<code>当前许可证仅可以内网部署</code>。</li><li><strong>完整性错误</strong>：如 <code>检测到WASM模块依赖的浏览器的原生方法遭篡改</code>。</li><li><strong>配置错误</strong>：如 <code>许可证配置密钥错误或缺失</code>。</li></ul><h3 id="⚖️-法律声明-legal-statements" tabindex="-1">⚖️ 法律声明 (Legal Statements) <a class="header-anchor" href="#⚖️-法律声明-legal-statements" aria-label="Permalink to &quot;⚖️ 法律声明 (Legal Statements)&quot;">​</a></h3><p>硬编码的法律红线，用于保护知识产权及规避合规风险。</p><ul><li><strong>版权声明</strong>：明确严禁提取素材或源码。</li><li><strong>合规限制</strong>：包含特定区域的黑名单警告，这是基于出口管制或反诈策略的特殊风控文案。</li></ul><h2 id="信息输出渠道" tabindex="-1">信息输出渠道 <a class="header-anchor" href="#信息输出渠道" aria-label="Permalink to &quot;信息输出渠道&quot;">​</a></h2><p>INFO 模块并不直接操作 DOM 显示文字（除了水印），它通常通过以下方式输出信息：</p><ol><li><strong>Console 铭牌</strong>：在开发者工具控制台打印带有样式版权信息。</li><li><strong>tuiCoreInfo()</strong>：当开发者在控制台主动调用此函数时，返回完整的结构化信息对象。</li><li><strong>错误对象 (Error Object)</strong>：当发生 Panic 或熔断时，抛出的 Error Message 源自此模块。</li></ol>',24)])])}const p=o(n,[["render",s]]);export{u as __pageData,p as default};
