import{_ as i,o as a,c as e,ah as t}from"./chunks/framework.PKn7PQPU.js";const c=JSON.parse('{"title":"DOM Operations","description":"","frontmatter":{},"headers":[],"relativePath":"en/utils/modules/dom.md","filePath":"en/utils/modules/dom.md"}'),n={name:"en/utils/modules/dom.md"};function l(h,s,o,p,r,d){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="dom-operations" tabindex="-1">DOM Operations <a class="header-anchor" href="#dom-operations" aria-label="Permalink to &quot;DOM Operations&quot;">​</a></h1><p>The <strong>DOM Module</strong> provides a lightweight encapsulation of native DOM operations, specifically optimized for the TechUI <strong>TuiAdaptive</strong> system.</p><p>In addition to standard element querying and traversal, it features core algorithms for accurately calculating element dimensions and coordinates within complex scaling contexts.</p><h2 id="import-method" tabindex="-1">Import Method <a class="header-anchor" href="#import-method" aria-label="Permalink to &quot;Import Method&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { syncContSize, tCoreTpl, tDom, tQuery } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@techui/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="element-querying" tabindex="-1">Element Querying <a class="header-anchor" href="#element-querying" aria-label="Permalink to &quot;Element Querying&quot;">​</a></h2><p>The <strong>tQuery</strong> object provides a set of shortcut methods for finding and traversing DOM nodes.</p><h3 id="tquery-el-selector-all" tabindex="-1">tQuery.el(selector, all) <a class="header-anchor" href="#tquery-el-selector-all" aria-label="Permalink to &quot;tQuery.el(selector, all)&quot;">​</a></h3><p>A shorthand wrapper for <code>querySelector</code>.</p><ul><li><strong>selector</strong>: CSS selector string.</li><li><strong>all</strong>: <code>boolean</code>. Defaults to <code>false</code> (returns a single element); set to <code>true</code> to return a <code>NodeList</code>.</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tQuery.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> items</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tQuery.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.list-item&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="tquery-get1stparent-el-selector" tabindex="-1">tQuery.get1stParent(el, selector) <a class="header-anchor" href="#tquery-get1stparent-el-selector" aria-label="Permalink to &quot;tQuery.get1stParent(el, selector)&quot;">​</a></h3><p>Finds the nearest matching parent element (a wrapper for <code>closest</code>).</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Finds the nearest .card parent of the currently clicked element</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> card</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tQuery.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get1stParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.card&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="tquery-clearexcept-container-exceptel" tabindex="-1">tQuery.clearExcept(container, exceptEl) <a class="header-anchor" href="#tquery-clearexcept-container-exceptel" aria-label="Permalink to &quot;tQuery.clearExcept(container, exceptEl)&quot;">​</a></h3><p>Clears all child elements within a container except for one specified element. This is commonly used to preserve a loading mask or a specific state node.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tQuery.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearExcept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(document.body, document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h3 id="tquery-valuebypath-obj-path-fallback" tabindex="-1">tQuery.valueByPath(obj, path, fallback) <a class="header-anchor" href="#tquery-valuebypath-obj-path-fallback" aria-label="Permalink to &quot;tQuery.valueByPath(obj, path, fallback)&quot;">​</a></h3><p><strong>Multi-language/Deep Object Value Extractor</strong>. While not a direct DOM operation, this is frequently used to safely retrieve data in the form of <code>data.user.profile.name</code> before DOM rendering.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { user: { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;TechUI&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tQuery.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">valueByPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user.name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;TechUI&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tQuery.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">valueByPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user.age&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 18 (Fallback)</span></span></code></pre></div><h2 id="dimensions-and-adaptive" tabindex="-1">Dimensions and Adaptive <a class="header-anchor" href="#dimensions-and-adaptive" aria-label="Permalink to &quot;Dimensions and Adaptive&quot;">​</a></h2><p><strong>tDom</strong> is the core object TechUI uses to handle adaptive layouts. It identifies whether an element is inside a <code>#tuiAdpt</code> (Adaptive Scaling Panel) and calculates its true physical coordinates.</p><h3 id="tdom-isinadp-el" tabindex="-1">tDom.isInAdp(el) <a class="header-anchor" href="#tdom-isinadp-el" aria-label="Permalink to &quot;tDom.isInAdp(el)&quot;">​</a></h3><p>Determines if an element is located inside an adaptive scaling container (<code>#tuiAdpt</code>).</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tDom.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isInAdp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(myElement)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;The current element is in a scaled environment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="tdom-rootinfo-el" tabindex="-1">tDom.rootInfo(el) <a class="header-anchor" href="#tdom-rootinfo-el" aria-label="Permalink to &quot;tDom.rootInfo(el)&quot;">​</a></h3><p>Retrieves detailed layout information for an element relative to both the <strong>browser viewport (Root)</strong> and the <strong>adaptive container (Adpt)</strong>. This method resolves issues where native <code>getBoundingClientRect</code> data is difficult to convert within a <code>transform: scale()</code> environment.</p><ul><li><strong>Returns</strong>: An object containing <code>rootWidth</code>, <code>isInAdp</code>, and critical coordinate offsets like <code>A2RTop</code> (Adaptive To Root Top).</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> layout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tDom.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rootInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// layout.A2RLeft represents the distance from the adaptive container&#39;s left boundary to the viewport</span></span></code></pre></div><h3 id="synccontsize-options" tabindex="-1">syncContSize(options) <a class="header-anchor" href="#synccontsize-options" aria-label="Permalink to &quot;syncContSize(options)&quot;">​</a></h3><p><strong>Container Size Synchronization Calculator</strong>. Calculates the geometric properties of a &quot;source element&quot; so they can be applied to a &quot;target element&quot; (primarily used for calculations in TuiAdaptive synchronization containers).</p><ul><li><strong>Parameters</strong>: <ul><li><code>source</code>: Source DOM element.</li><li><code>target</code>: Target DOM element (Note: In the source code, actual style assignment is commented out; this is mainly used to return the calculated <code>Rect</code> object).</li><li><code>syncPosition</code>: <code>boolean</code>, whether to calculate position.</li><li><code>positionBaseTo</code>: <code>&#39;root&#39;</code> (based on viewport) | <code>&#39;parent&#39;</code> (based on parent container offset).</li></ul></li><li><strong>Logic</strong>: Automatically detects if the <code>source</code> is within an adaptive panel. If it is, it uses <code>clientWidth</code> instead of <code>rect.width</code> to avoid dimension deviations caused by scaling.</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> syncContSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  source: buttonEl,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  target: tooltipEl,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  syncPosition: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  positionBaseTo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// rect: { width: 100, height: 40, left: 200, top: 300 }</span></span></code></pre></div><h2 id="template-parsing" tabindex="-1">Template Parsing <a class="header-anchor" href="#template-parsing" aria-label="Permalink to &quot;Template Parsing&quot;">​</a></h2><h3 id="tcoretpl-string" tabindex="-1">tCoreTpl(string) <a class="header-anchor" href="#tcoretpl-string" aria-label="Permalink to &quot;tCoreTpl(string)&quot;">​</a></h3><p>A minimalist string template parsing function. It is used to parse specific configuration strings in the format <code>[key]value</code> (currently used for parsing certain template strings in Wasm modules).</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> configStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[title]Hello TechUI[color]Blue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tCoreTpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(configStr);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Output: { title: &quot;Hello TechUI&quot;, color: &quot;Blue&quot; }</span></span></code></pre></div>`,37)])])}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
