import{_ as i,o as a,c as t,ah as l}from"./chunks/framework.PKn7PQPU.js";const E=JSON.parse('{"title":"布局组件","description":"","frontmatter":{},"headers":[],"relativePath":"cn/_common/admin/layout.md","filePath":"cn/_common/admin/layout.md"}'),e={name:"cn/_common/admin/layout.md"};function n(h,s,k,p,d,o){return a(),t("div",null,[...s[0]||(s[0]=[l(`<h1 id="布局组件" tabindex="-1">布局组件 <a class="header-anchor" href="#布局组件" aria-label="Permalink to &quot;布局组件&quot;">​</a></h1><p><code>&lt;TuiAdminLayout&gt;</code> 是工作台（Admin）模块的骨架组件。它将系统划分为侧边导航区和主体内容区，并负责协调视图的渲染、缓存与交互状态。</p><p>该组件通常作为路由的根容器，也可以包裹在自适应组件内部使用，从而一劳永逸的解决不同分辨率的适配问题。</p><h2 id="组件结构" tabindex="-1">组件结构 <a class="header-anchor" href="#组件结构" aria-label="Permalink to &quot;组件结构&quot;">​</a></h2><p>布局组件内部集成了以下核心子模块：</p><ol><li><strong>LayoutSider (侧边栏)</strong>：负责展示系统 Logo、菜单树以及底部的辅助工具栏（Assist）。</li><li><strong>LayoutTab (多页签)</strong>：位于顶部，展示当前打开的页面标签，支持右键菜单和页签切换。</li><li><strong>Main Content (主体区)</strong>：包含 <code>&lt;router-view&gt;</code>，集成了 <code>KeepAlive</code> 缓存机制、滚动条管理和“回到顶部”功能。</li></ol><h2 id="基础用法" tabindex="-1">基础用法 <a class="header-anchor" href="#基础用法" aria-label="Permalink to &quot;基础用法&quot;">​</a></h2><p>在 <code>views/layout.vue</code> 中，通常配合 <code>&lt;TuiAdaptive&gt;</code> 组件使用：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Assist </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./assist.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 引入辅助栏组件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiAdaptive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiAdminLayout</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :viewBackground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> #logo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logo-area&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/logo.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;TechUI Admin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> #assist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">Assist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiAdminLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiAdaptive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="api-参考" tabindex="-1">API 参考 <a class="header-anchor" href="#api-参考" aria-label="Permalink to &quot;API 参考&quot;">​</a></h2><h3 id="属性-props" tabindex="-1">属性 (Props) <a class="header-anchor" href="#属性-props" aria-label="Permalink to &quot;属性 (Props)&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">属性名</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>viewBackground</strong></td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td><td style="text-align:left;">是否允许当前视图显示背景图。当全局配置 <code>$gBackground</code> 为 <code>&#39;all&#39;</code> 时，此属性可用于精细控制特定页面（如 Dashboard）显示背景，而普通表格页面显示纯色背景。</td></tr></tbody></table><h3 id="插槽-slots" tabindex="-1">插槽 (Slots) <a class="header-anchor" href="#插槽-slots" aria-label="Permalink to &quot;插槽 (Slots)&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">插槽名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>logo</strong></td><td style="text-align:left;">侧边栏顶部的 Logo 区域。</td></tr><tr><td style="text-align:left;"><strong>assist</strong></td><td style="text-align:left;">侧边栏底部的辅助功能区域（通常放置用户头像、设置、注销按钮等）。</td></tr></tbody></table><h2 id="核心特性与逻辑" tabindex="-1">核心特性与逻辑 <a class="header-anchor" href="#核心特性与逻辑" aria-label="Permalink to &quot;核心特性与逻辑&quot;">​</a></h2><h3 id="视图缓存-keepalive" tabindex="-1">视图缓存 (KeepAlive) <a class="header-anchor" href="#视图缓存-keepalive" aria-label="Permalink to &quot;视图缓存 (KeepAlive)&quot;">​</a></h3><p>组件内部通过全局服务 <code>$AKeepAlive</code> 实现了自动化的路由缓存。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">router-view</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-slot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ Component }&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">keep-alive</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$AKeepAlive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">component</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :is</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Component&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">keep-alive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">router-view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><strong>工作原理</strong>：当路由跳转时，动态路由逻辑会根据路由配置中的 <code>meta.keepAlive</code> 字段，自动将路由名称添加到 <code>$AKeepAlive</code> 数组中，从而激活 Vue 的缓存机制。</li></ul><h3 id="页面刷新-refresh" tabindex="-1">页面刷新 (Refresh) <a class="header-anchor" href="#页面刷新-refresh" aria-label="Permalink to &quot;页面刷新 (Refresh)&quot;">​</a></h3><p>组件提供了一个“伪刷新”机制，无需重载浏览器即可重新渲染当前视图。</p><ul><li><strong>实现</strong>：通过 <code>refreshView</code> 方法短暂地切换渲染组件的 <code>key</code> 或 <code>v-if</code> 状态，强制 Vue 销毁并重建组件。</li><li><strong>触发</strong>：通常由 <code>&lt;LayoutTab&gt;</code> 组件上的刷新按钮触发，通过事件 <code>@refreshView</code> 传递给布局组件执行。</li></ul><h3 id="滚动管理与回到顶部" tabindex="-1">滚动管理与回到顶部 <a class="header-anchor" href="#滚动管理与回到顶部" aria-label="Permalink to &quot;滚动管理与回到顶部&quot;">​</a></h3><p>布局组件接管了页面的滚动条（<code>.tui-container</code>），而不是使用浏览器默认的 <code>body</code> 滚动。</p><ul><li><strong>滚动监听</strong>：组件挂载时会自动注册 <code>scroll</code> 事件监听器。</li><li><strong>回到顶部</strong>：当滚动距离超过可视高度时，右下角会自动显示“回到顶部”按钮。点击后使用 <code>scrollTo({ top: 0, behavior: &#39;smooth&#39; })</code> 平滑滚动至顶部。</li><li><strong>自动归位</strong>：监听路由变化 <code>watch(()=&gt;route.path)</code>，在切换页面时自动将滚动条重置为 0。</li></ul><h3 id="最大化模式-maximize" tabindex="-1">最大化模式 (Maximize) <a class="header-anchor" href="#最大化模式-maximize" aria-label="Permalink to &quot;最大化模式 (Maximize)&quot;">​</a></h3><p>当用户点击页签栏的“最大化”按钮时，全局状态 <code>$tState.globalState.maximize</code> 变为 <code>true</code>。</p><ul><li><strong>样式响应</strong>：根元素添加 <code>.is-maximize</code> 类名，通过 CSS 隐藏侧边栏 (<code>LayoutSider</code>) 和页签栏 (<code>LayoutTab</code>)，使内容区独占屏幕。</li><li><strong>恢复按钮</strong>：在最大化模式下，右上角会显示一个悬浮的“恢复视图”按钮，点击即可退出最大化状态。</li></ul><h3 id="背景策略" tabindex="-1">背景策略 <a class="header-anchor" href="#背景策略" aria-label="Permalink to &quot;背景策略&quot;">​</a></h3><p>组件根据全局配置 <code>$gBackground</code> 和本地属性 <code>viewBackground</code> 动态计算背景类名：</p><ul><li><code>.tui-view-bg</code>：显示全局配置的背景图（适用于数据大屏、主页）。</li><li><code>.is-normal-bg</code>：强制使用标准纯色背景（适用于表单、数据列表等需要高对比度的页面）。</li></ul>`,31)])])}const g=i(e,[["render",n]]);export{E as __pageData,g as default};
