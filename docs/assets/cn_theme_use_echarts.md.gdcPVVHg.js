import{_ as i,o as a,c as n,ah as e}from"./chunks/framework.PKn7PQPU.js";const c=JSON.parse('{"title":"ECharts 主题集成","description":"","frontmatter":{},"headers":[],"relativePath":"cn/theme/use/echarts.md","filePath":"cn/theme/use/echarts.md"}'),h={name:"cn/theme/use/echarts.md"};function t(l,s,p,k,r,d){return a(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="echarts-主题集成" tabindex="-1">ECharts 主题集成 <a class="header-anchor" href="#echarts-主题集成" aria-label="Permalink to &quot;ECharts 主题集成&quot;">​</a></h1><p>TechUI 的主题系统与 ECharts 深度集成。当启用了 ECharts 特性时，系统会自动将当前 TechUI 主题的配色方案（Colors）和字体配置（Fonts）转换为 ECharts 能够识别的主题 JSON，并进行动态注册。</p><p>这意味着您无需为图表单独编写复杂的样式配置，所有的图表将自动适配当前的系统主题（如深色/浅色模式切换）。</p><h2 id="开启功能" tabindex="-1">开启功能 <a class="header-anchor" href="#开启功能" aria-label="Permalink to &quot;开启功能&quot;">​</a></h2><p>ECharts 主题集成是按需开启的。需要在应用初始化时，将 <code>features.echarts</code> 设置为 <code>true</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...其他配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  features: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    echarts: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 开启 ECharts 集成</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    admin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TechUIInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params);</span></span></code></pre></div><p>当此功能开启后，<code>TuiProvider</code> 会在以下时机自动处理 ECharts 主题：</p><ol><li>应用初始化时。</li><li>调用 <code>themeToggle</code> 切换主题时。</li></ol><h2 id="配置数据映射" tabindex="-1">配置数据映射 <a class="header-anchor" href="#配置数据映射" aria-label="Permalink to &quot;配置数据映射&quot;">​</a></h2><p>TechUI 的主题文件（如 <code>lightBlue.js</code>）中的 <code>chart</code> 对象专门用于控制图表样式。系统通过内部转换器 (<code>echartsTheme.js</code>) 将这些语义化变量映射到 ECharts 的具体配置项。</p><p>以下是 <code>themeData.chart</code> 结构与 ECharts 组件的对应关系：</p><h3 id="调色盘-palette" tabindex="-1">调色盘 (Palette) <a class="header-anchor" href="#调色盘-palette" aria-label="Permalink to &quot;调色盘 (Palette)&quot;">​</a></h3><p>控制柱状图、折线图、饼图等基础图表的默认颜色序列。</p><ul><li><strong>配置项</strong>: <code>chart.palette</code><ul><li><strong>类型</strong>: <code>Array</code> (颜色值数组)</li><li><strong>映射逻辑</strong>: 系统会自动基于数组中的颜色，使用 <code>$c.scale</code> 生成更丰富的渐变色阶，赋值给 ECharts 的 <code>color</code> 属性。</li></ul></li></ul><h3 id="坐标轴与线条-axis-lines" tabindex="-1">坐标轴与线条 (Axis &amp; Lines) <a class="header-anchor" href="#坐标轴与线条-axis-lines" aria-label="Permalink to &quot;坐标轴与线条 (Axis &amp; Lines)&quot;">​</a></h3><p>控制直角坐标系（Grid）、雷达图（Radar）的轴线、网格线样式。</p><ul><li><strong>配置项</strong>: <code>chart.line</code><ul><li><code>weak</code>: 用于分割线 (SplitLine) 或次要刻度。</li><li><code>base</code>: 用于轴线 (AxisLine) 或主要边框。</li><li><code>strong</code>: 用于仪表盘外框或强调线条。</li></ul></li></ul><h3 id="地图与地理坐标-map-geo" tabindex="-1">地图与地理坐标 (Map &amp; Geo) <a class="header-anchor" href="#地图与地理坐标-map-geo" aria-label="Permalink to &quot;地图与地理坐标 (Map &amp; Geo)&quot;">​</a></h3><p>控制地图区域的填充、边框以及交互状态。</p><ul><li><strong>配置项</strong>: <code>chart.map</code><ul><li><code>bg</code> / <code>bd</code>: 普通状态下的区域背景色与边框色。</li><li><code>bg_hov</code> / <code>bd_hov</code>: 高亮（Emphasis）状态下的背景与边框。</li><li><code>bg_act</code> / <code>bd_act</code>: 选中（Select）状态下的背景与边框。</li><li><code>fc</code>: 地图标签文字颜色。</li><li><code>shadow</code>: 地图阴影颜色。</li></ul></li></ul><h3 id="视觉映射-visualmap" tabindex="-1">视觉映射 (VisualMap) <a class="header-anchor" href="#视觉映射-visualmap" aria-label="Permalink to &quot;视觉映射 (VisualMap)&quot;">​</a></h3><p>控制热力图或数据范围的渐变色。</p><ul><li><strong>配置项</strong>: <code>chart.visual</code></li><li><strong>映射逻辑</strong>: 基于配置的起止颜色，生成 4 级色阶，赋值给 <code>visualMap.color</code>。</li></ul><h2 id="内部转换逻辑" tabindex="-1">内部转换逻辑 <a class="header-anchor" href="#内部转换逻辑" aria-label="Permalink to &quot;内部转换逻辑&quot;">​</a></h2><p>系统内部使用 <code>echartsTheme.js</code> 进行转换。它不仅使用了 <code>chart</code> 对象，还复用了主题中的其他通用变量，以确保图表与 UI 高度统一：</p><ul><li><strong>背景</strong>: 使用 <code>common.bg</code> 作为 Tooltip 的背景色。</li><li><strong>文字</strong>: 使用 <code>font.base</code> 作为图表标题、图例、坐标轴标签的默认颜色；使用 <code>font.weak</code> 作为副标题颜色。</li><li><strong>科幻元素</strong>: 如果主题包含 <code>scifi</code> 配置，时间轴（Timeline）组件会引用 <code>scifi.hlite</code> 和 <code>scifi.focus</code> 颜色。</li></ul><h2 id="在项目中使用" tabindex="-1">在项目中使用 <a class="header-anchor" href="#在项目中使用" aria-label="Permalink to &quot;在项目中使用&quot;">​</a></h2><h3 id="自动应用" tabindex="-1">自动应用 <a class="header-anchor" href="#自动应用" aria-label="Permalink to &quot;自动应用&quot;">​</a></h3><p>如果您使用的是 TechUI 封装的图表组件（如 <code>&lt;TuiChart&gt;</code> 或 <code>&lt;TuiMap&gt;</code>），它们会自动获取当前主题名称并初始化。</p><h3 id="手动初始化" tabindex="-1">手动初始化 <a class="header-anchor" href="#手动初始化" aria-label="Permalink to &quot;手动初始化&quot;">​</a></h3><p>如果您直接使用 ECharts 原生 API，可以通过全局配置获取当前主题名称：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echarts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { inject, onMounted, ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在组件中</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$globalConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chartRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // $globalConfig.theme 即为注册到 ECharts 中的主题名称（如 &#39;lightBlue&#39;）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myChart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chartRef.value, $globalConfig.theme);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="响应主题切换" tabindex="-1">响应主题切换 <a class="header-anchor" href="#响应主题切换" aria-label="Permalink to &quot;响应主题切换&quot;">​</a></h3><p>当全局主题切换时，ECharts 实例通常需要销毁重建或重新设置配置。如果您使用了 <code>watch</code> 监听 <code>$gTheme</code>，请确保重新初始化图表：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { watch } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$gTheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($gTheme, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newTheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (myChart) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dispose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用新主题名称初始化</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myChart </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chartRef.value, newTheme);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(option);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div>`,35)])])}const E=i(h,[["render",t]]);export{c as __pageData,E as default};
