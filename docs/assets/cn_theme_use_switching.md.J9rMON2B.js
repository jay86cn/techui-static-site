import{_ as i,o as a,c as e,ah as t}from"./chunks/framework.PKn7PQPU.js";const g=JSON.parse('{"title":"切换控制","description":"","frontmatter":{},"headers":[],"relativePath":"cn/theme/use/switching.md","filePath":"cn/theme/use/switching.md"}'),n={name:"cn/theme/use/switching.md"};function l(h,s,p,k,o,r){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="切换控制" tabindex="-1">切换控制 <a class="header-anchor" href="#切换控制" aria-label="Permalink to &quot;切换控制&quot;">​</a></h1><p>TechUI 的主题切换是纯运行时的。这意味着当主题发生改变时，页面<strong>不需要刷新</strong>。系统会利用 Vue 的响应式机制和 CSS 变量的继承特性，瞬间更新整个应用的所有视觉元素，包括 DOM 结构和 Canvas 图表。</p><h2 id="切换方式" tabindex="-1">切换方式 <a class="header-anchor" href="#切换方式" aria-label="Permalink to &quot;切换方式&quot;">​</a></h2><p>TechUI 提供了三个维度的切换控制能力，从开箱即用的 UI 组件到底层的 API 调用。</p><h3 id="使用切换组件-tuithemetoggle" tabindex="-1">使用切换组件 (TuiThemeToggle) <a class="header-anchor" href="#使用切换组件-tuithemetoggle" aria-label="Permalink to &quot;使用切换组件 (TuiThemeToggle)&quot;">​</a></h3><p><code>&lt;TuiThemeToggle&gt;</code> 是一个专用的轻量级按钮组件，通常放置在导航栏、登录页角落或侧边栏底部。</p><p><strong>基础用法</strong>：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiThemeToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiThemeToggle</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> direction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;v&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><strong>行为逻辑</strong>： 点击该组件时，它会在所有已注册的主题之间循环切换。</p><h3 id="使用控制面板-control-panel" tabindex="-1">使用控制面板 (Control Panel) <a class="header-anchor" href="#使用控制面板-control-panel" aria-label="Permalink to &quot;使用控制面板 (Control Panel)&quot;">​</a></h3><p>TechUI 内置了一个全局配置面板 <code>&lt;TuiControlPanel&gt;</code>，其中包含了更详细的主题选择器。用户可以在此面板中直观地看到每个主题的预览色块（由注册时的 <code>colors</code> 字段定义）。</p><p><strong>呼出方式</strong>： 通常通过调用全局方法 <code>controlPanelToggle()</code> 来显示或隐藏面板。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { inject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">controlPanelToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 绑定到某个设置按钮</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> openSettings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  controlPanelToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="编程控制-api" tabindex="-1">编程控制 (API) <a class="header-anchor" href="#编程控制-api" aria-label="Permalink to &quot;编程控制 (API)&quot;">​</a></h3><p>在业务逻辑中，如果您需要根据特定条件（如时间、用户偏好配置）强制切换主题，可以使用全局服务提供的 <code>themeToggle</code> 函数。</p><p><strong>函数签名</strong>： <code>themeToggle(themeName: String, themeScheme: String)</code></p><p><strong>使用示例</strong>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { inject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">themeToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> switchToDark</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 参数1: 主题的注册名称 (value)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 参数2: 配色方案类型 (&#39;light&#39; 或 &#39;dark&#39;)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  themeToggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;darkBlue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dark&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><strong>转场动画</strong>： 值得注意的是，通过 <code>themeToggle</code> 切换主题时，系统会自动触发 <strong>View Transition</strong>（视图转场动画）。TechUI 默认使用圆形扩散或淡入淡出效果，让主题切换过程显得平滑且充满科技感，而非生硬的颜色跳变。</p><h2 id="智能策略" tabindex="-1">智能策略 <a class="header-anchor" href="#智能策略" aria-label="Permalink to &quot;智能策略&quot;">​</a></h2><h3 id="单-多主题自动适配" tabindex="-1">单/多主题自动适配 <a class="header-anchor" href="#单-多主题自动适配" aria-label="Permalink to &quot;单/多主题自动适配&quot;">​</a></h3><p>TechUI 的 UI 组件（包括 <code>&lt;TuiThemeToggle&gt;</code> 和控制面板中的主题模块）具有智能感知能力：</p><ul><li><strong>单主题模式</strong>：如果在 <code>main.js</code> 中仅引入了一个主题文件（例如只引入了 <code>lightBlue</code>），系统会判断当前无需切换。此时，<code>&lt;TuiThemeToggle&gt;</code> 会自动隐藏（渲染为注释），控制面板中的主题选项也会隐藏。</li><li><strong>多主题模式</strong>：一旦引入了两个及以上的主题，相关 UI 控件会自动显示。</li></ul><p>这种设计允许开发者在开发阶段引入多个主题进行调试，而在发布阶段若只想保留一个主题，只需注释掉 <code>import</code> 语句即可，无需修改任何 UI 代码。</p><h2 id="持久化存储" tabindex="-1">持久化存储 <a class="header-anchor" href="#持久化存储" aria-label="Permalink to &quot;持久化存储&quot;">​</a></h2><p>主题的状态具有持久化能力。</p><ol><li><strong>自动保存</strong>：当用户切换主题后，TechUI 会自动将最新的主题名称 (<code>theme</code>) 和方案 (<code>themeScheme</code>) 保存到浏览器的本地存储（LocalStorage 或 SessionStorage，取决于全局配置）。</li><li><strong>自动恢复</strong>：当用户刷新页面或下次访问时，<code>TuiProvider</code> 会在初始化阶段优先读取本地存储中的配置，自动应用上次选中的主题，确保用户体验的一致性。</li></ol><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><p><strong>Q: 为什么调用 <code>themeToggle</code> 后页面没有变化？</strong><strong>A:</strong> 请检查以下两点：</p><ol><li>传递的 <code>themeName</code> 是否与主题文件中注册的 <code>value</code> 字段完全一致（区分大小写）。</li><li>目标主题文件是否已经在 <code>main.js</code> 中被 <code>import</code> 引入。未引入的主题不会被注册到系统中。</li></ol><p><strong>Q: 如何关闭切换时的转场动画？</strong><strong>A:</strong> 可以在全局配置中将 <code>transition</code> 设置为 <code>false</code>，或者在调用 <code>themeToggle</code> 前临时修改转场配置。但在大多数场景下，保留动画能提供更好的用户体验。</p>`,31)])])}const c=i(n,[["render",l]]);export{g as __pageData,c as default};
