import n from"./en__common_blocks_thanks_echarts.md.CjZg8v8K.js";import{C as r,c as i,o as d,j as e,G as o,aj as s,a as c,k as l}from"./chunks/framework.DPdjieCD.js";const b=JSON.parse('{"title":"TuiEchartsMap","description":"","frontmatter":{},"headers":[],"relativePath":"en/_common/advanced/echartsMap.md","filePath":"en/_common/advanced/echartsMap.md"}'),h={name:"en/_common/advanced/echartsMap.md"},f=Object.assign(h,{setup(p){return(g,t)=>{const a=r("AbsTag");return d(),i("div",null,[t[0]||(t[0]=e("h1",{id:"tuiechartsmap",tabindex:"-1"},[c("TuiEchartsMap "),e("a",{class:"header-anchor",href:"#tuiechartsmap","aria-label":'Permalink to "TuiEchartsMap"'},"​")],-1)),o(a,{types:"adv enh star",ver:"0.0.3"}),t[1]||(t[1]=s('<p><code>TuiEchartsMap</code> is the <strong>Geospatial Business Shell</strong> within the TechUI chart system.</p><p>It is not merely a container for hosting maps, but an <strong>intelligent logical orchestration host</strong>. It adopts a <strong>separated architecture design</strong>, wrapping ECharts&#39; native GIS rendering capabilities internally, while the outer shell takes over complex interaction logic such as <strong>map drill-down path management</strong>, <strong>multi-dimensional view switching</strong>, and <strong>timeline data rotation</strong>.</p><p>Developers do not need to concern themselves with low-level GeoJSON loading and coordinate system redrawing. Through the standard interfaces (Pipeline) provided by this &quot;shell&quot;, one can quickly build geospatial visualization applications with enterprise-level deep customization capabilities.</p><blockquote><p><strong>Note</strong>: This component focuses on high-performance rendering of 2D vector maps (based on SVG). If you need to use 3D mode, please be sure to read the <a href="./%23limitations-notes.html">3D Map Support Notes</a> at the end of this document.</p></blockquote><h2 id="core-architecture" tabindex="-1">Core Architecture <a class="header-anchor" href="#core-architecture" aria-label="Permalink to &quot;Core Architecture&quot;">​</a></h2><p>To handle complex map business logic (such as asynchronous data loading, drill-down path management, dynamic style calculation), this component adopts an <strong>MVC Separated Architecture</strong>. <code>index.vue</code> acts only as the Controller, while specific business logic is processed in a stream via the &quot;Utils Pipeline&quot;.</p><h3 id="recommended-directory-structure" tabindex="-1">Recommended Directory Structure <a class="header-anchor" href="#recommended-directory-structure" aria-label="Permalink to &quot;Recommended Directory Structure&quot;">​</a></h3><p>It is recommended to split the map logic into the following independent modules:</p><ul><li><strong>Controller (<code>index.vue</code>)</strong>: Responsible for state management (<code>reactive</code>), event listening (<code>chartClick</code>), and component mounting.</li><li><strong>Pipeline Utils</strong>:</li><li><code>0.themeExtra.js</code>: Theme and style mapping configuration.</li><li><code>1.getMapData.js</code>: Responsible for asynchronous fetching and caching strategies for GeoJSON data.</li><li><code>2.processOption.js</code>: Handles basic configurations like ECharts <code>geo</code> and <code>visualMap</code>.</li><li><code>3.processData.js</code>: Handles the generation and cleaning of <code>series</code> data (Scatter, Pin icons, Heatmap values).</li><li><code>init.js</code>: The unified entry point for assembling the above modules.</li></ul><p>This architecture makes map instances extremely easy to maintain and extend, achieving decoupling between the view layer and the logic layer.</p><div class="warning custom-block"><p class="custom-block-title">Remote Example Note</p><p>Since the map component uses a pipelined separation architecture involving complex asynchronous data flows and interaction logic, it is inconvenient to display it on a single page in the documentation. Please visit the Prime Test Cases directory in the GitHub or Gitee repository to view the complete engineering source code.</p></div><h2 id="core-features" tabindex="-1">Core Features <a class="header-anchor" href="#core-features" aria-label="Permalink to &quot;Core Features&quot;">​</a></h2><h3 id="data-switching" tabindex="-1">Data Switching <a class="header-anchor" href="#data-switching" aria-label="Permalink to &quot;Data Switching&quot;">​</a></h3><p>The component supports dynamic switching of different data dimensions on the same base map.</p><ul><li><strong>Multi-form Markers</strong>: Supports switching marker forms based on data types, such as switching from <strong>Scatter</strong> to <strong>Pin Icons with values</strong>.</li><li><strong>Differentiated Styles</strong>: Different data groups can be configured with completely different color schemes, icon size logic, and heat area styles.</li><li><strong>Dynamic Rendering</strong>: Combined with the <code>updateReplace</code> mechanism, instances do not need to be destroyed when switching data, allowing for smooth transitions.</li></ul><h3 id="layer-switching" tabindex="-1">Layer Switching <a class="header-anchor" href="#layer-switching" aria-label="Permalink to &quot;Layer Switching&quot;">​</a></h3><p>Supports complex layer control logic to meet multi-dimensional visualization needs.</p><ul><li><strong>Element Visibility</strong>: You can freely control the display and hiding of specific layers (such as markers, effect scatters, labels).</li><li><strong>GeoJSON Overlay</strong>: Supports custom GeoJSON layer overlays for displaying special geographical boundaries or custom areas.</li><li><strong>Mode Switching</strong>: Supports seamless switching from &quot;Administrative Division Fill Mode&quot; (Choropleth) to &quot;Geographic Plotting Mode&quot; (Scatter/EffectScatter).</li></ul><h3 id="timeline" tabindex="-1">Timeline <a class="header-anchor" href="#timeline" aria-label="Permalink to &quot;Timeline&quot;">​</a></h3><p>Integrated time-dimension data display capabilities.</p><ul><li><strong>Multi-dimensional Evolution</strong>: Combined with the ECharts Timeline component, it displays trends in data changes over years or time periods.</li><li><strong>Automatic Rotation</strong>: Supports configuration of automatic playback for the timeline, achieving dynamic data presentation effects.</li><li><strong>Chart Linkage</strong>: Changes in the timeline can simultaneously drive the synchronized update of map data and associated charts (such as a ranking list on the right).</li></ul><h3 id="theming" tabindex="-1">Theming <a class="header-anchor" href="#theming" aria-label="Permalink to &quot;Theming&quot;">​</a></h3><p>Deeply integrated with the TechUI global theme system.</p><ul><li><strong>Global Response</strong>: The component automatically listens for changes in <code>$gTheme</code> and refreshes map color schemes in real-time.</li><li><strong>Refined Customization (<code>themeExtra</code>)</strong>: Through the <code>0.themeExtra.js</code> configuration file, you can individually define map area colors, border colors, highlight colors, and Pin icon gradient colors for different themes (DeepBlue, Light, Dark).</li></ul><h3 id="map-drill-down" tabindex="-1">Map Drill-down <a class="header-anchor" href="#map-drill-down" aria-label="Permalink to &quot;Map Drill-down&quot;">​</a></h3><p>Built-in out-of-the-box hierarchical interaction capabilities.</p><ul><li><strong>Interactive Drill-down</strong>: Clicking on a map area automatically loads the lower-level administrative division data and redraws the map.</li><li><strong>Breadcrumb Navigation (<code>breadcrumb</code>)</strong>: Automatically displays the current navigation path at the top (e.g., National &gt; Zhejiang Province &gt; Hangzhou City), supporting clicking on breadcrumbs to return to the upper level.</li><li><strong>Hierarchy Perception</strong>: The component internally maintains a <code>navBcrumb</code> state queue to automatically manage the current hierarchy depth.</li></ul><h3 id="data-linkage" tabindex="-1">Data Linkage <a class="header-anchor" href="#data-linkage" aria-label="Permalink to &quot;Data Linkage&quot;">​</a></h3><p>The map component is not just an independent view; it usually serves as the <strong>&quot;Context Controller&quot;</strong> for the entire dashboard.</p><ul><li><strong>State Monitoring</strong>: By listening to the <code>navBcrumb</code> object, the parent component can perceive the current map navigation depth and regional information in real-time.</li><li><strong>Peripheral Collaboration</strong>: When a user drills down to a certain province (e.g., &quot;Zhejiang Province&quot;), you can capture the latest <code>adcode</code> via <code>watch</code> and instantly trigger data refreshes for peripheral components (such as right-side rankings, top statistics cards), achieving a <strong>&quot;Map moves, Full screen moves&quot;</strong> linkage experience.</li></ul><h3 id="popup-info" tabindex="-1">Popup Info <a class="header-anchor" href="#popup-info" aria-label="Permalink to &quot;Popup Info&quot;">​</a></h3><p>Supports rich information display interactions.</p><ul><li><strong>Trigger Methods</strong>: Supports manual triggering via <code>click</code> or automatic polling popups via <code>interval</code>.</li><li><strong>Custom Content</strong>: The content of the popup is rendered entirely by Vue components, supporting complex HTML structures and business logic.</li><li><strong>⚠️ Component Note</strong>: The example code only demonstrates basic DOM mounting logic via <code>createPopover</code>. In actual use, please implement popup styles in combination with the basic UI component library in your project (e.g., the TechUI Scifi component library does not include <code>PopInfo</code> or <code>PopTip</code> components; these need to be developed independently).</li></ul><h2 id="limitations-and-notes" tabindex="-1">Limitations and Notes <a class="header-anchor" href="#limitations-and-notes" aria-label="Permalink to &quot;Limitations and Notes&quot;">​</a></h2><h3 id="map-instance-permissions" tabindex="-1">Map Instance Permissions <a class="header-anchor" href="#map-instance-permissions" aria-label="Permalink to &quot;Map Instance Permissions&quot;">​</a></h3><ul><li><strong>Test Cases</strong>: In Github and Gitee, only the Prime component library provides basic map display examples. It <strong>does not include</strong> complete map drill-down logic and complex interaction source code.</li><li><strong>Authorized Version</strong>: Advanced instances with complete map drill-down, pipelined architecture, and multi-view switching are part of the enterprise authorization content and can only be viewed and used after obtaining authorization.</li></ul><h3 id="geojson-data-source" tabindex="-1">GeoJSON Data Source <a class="header-anchor" href="#geojson-data-source" aria-label="Permalink to &quot;GeoJSON Data Source&quot;">​</a></h3><ul><li><strong>Data Not Provided</strong>: Considering the timeliness of map data and surveying compliance, this component library <strong>does not build in nor provide</strong> any GeoJSON files.</li><li><strong>Acquisition Method</strong>: Developers are requested to download the required GeoJSON data from Alibaba Cloud DataV, Amap Open Platform, or other compliant open-source data platforms, and load/configure them via <code>1.getMapData.js</code>.</li></ul><h3 id="_3d-map-support-notes-risk-warning" tabindex="-1">3D Map Support Notes (Risk Warning) <a class="header-anchor" href="#_3d-map-support-notes-risk-warning" aria-label="Permalink to &quot;3D Map Support Notes (Risk Warning)&quot;">​</a></h3><p>Although <code>TuiEchartsMap</code> theoretically supports 3D Earth or 3D map effects by configuring <code>echarts-gl</code>, we <strong>strongly advise caution</strong> for the following reasons:</p><ul><li><strong>Stagnant Maintenance</strong>: The <code>echarts-gl</code> library is updated slowly, and there are many known compatibility issues with ECharts versions 5/6.</li><li><strong>Missing Interaction</strong>: In 3D mode, many basic interactions (such as area click drill-down, precise Tooltip triggering) may not work properly or respond sluggishly.</li><li><strong>Version Rollback</strong>: If 3D mode must be used, it is usually necessary to roll back the ECharts core library to v5.x, which may affect the use of features in other charts within the project.</li></ul><h2 id="api-reference" tabindex="-1">API Reference <a class="header-anchor" href="#api-reference" aria-label="Permalink to &quot;API Reference&quot;">​</a></h2><h3 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;Props&quot;">​</a></h3><p>In addition to map-specific configurations, the component also fully passes through container size and rendering control attributes.</p><table tabindex="0"><thead><tr><th>Property Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>chartOption</strong></td><td><code>Object</code></td><td>(Required)</td><td>Chart core configuration object.</td></tr><tr><td><strong>geoJsonData</strong></td><td><code>Object</code></td><td>(Required)</td><td>GeoJSON data object for the current map.</td></tr><tr><td><strong>mapName</strong></td><td><code>String</code></td><td>(Required)</td><td>Registered name of the current map (e.g., &#39;china&#39;).</td></tr><tr><td><strong>allAreaCodes</strong></td><td><code>Array</code></td><td>-</td><td>Administrative division mapping table, used for name-code conversion during drill-down.</td></tr><tr><td><strong>width</strong></td><td><code>Number/String</code></td><td>-</td><td>Container width.</td></tr><tr><td><strong>height</strong></td><td><code>Number/String</code></td><td>-</td><td>Container height.</td></tr><tr><td><strong>renderer</strong></td><td><code>String</code></td><td><code>&#39;canvas&#39;</code></td><td>Rendering mode. Recommended to use <code>&#39;svg&#39;</code> for optimal clarity.</td></tr><tr><td><strong>updateReplace</strong></td><td><code>Boolean</code></td><td><code>true</code></td><td>Whether to use <code>replaceMerge</code> strategy when updating data, for smooth layer switching.</td></tr><tr><td><strong>enableBreadcrumb</strong></td><td><code>Boolean</code></td><td><code>false</code></td><td>Whether to enable built-in breadcrumb navigation and drill-down logic.</td></tr><tr><td><strong>breadcrumbConfig</strong></td><td><code>Object</code></td><td><code>{ data: [...], position: ... }</code></td><td>Breadcrumb configuration items (initial path, position coordinates).</td></tr><tr><td><strong>loading</strong></td><td><code>Boolean</code></td><td><code>null</code></td><td>Loading state control (supports <code>v-model:loading</code>).</td></tr><tr><td><strong>ready</strong><br><code>v0.0.5+</code></td><td><code>Boolean</code></td><td><code>false</code></td><td><strong>Rendering Control Signal</strong>. Initialization/rendering begins only when set to <code>true</code>.</td></tr><tr><td><strong>initOptions</strong></td><td><code>Object</code></td><td><code>{}</code></td><td>Additional parameters for ECharts initialization (e.g., <code>devicePixelRatio</code>, <code>locale</code>).</td></tr><tr><td><strong>resizeObserver</strong></td><td><code>String</code></td><td><code>&#39;global&#39;</code></td><td>Adaptation strategy. <code>&#39;self&#39;</code> (component itself), <code>&#39;global&#39;</code> (window), <code>&#39;none&#39;</code> (disabled).</td></tr><tr><td><strong>dataOpacity</strong></td><td><code>Number</code></td><td>-</td><td>Data layer opacity (passed through to the underlying renderer).</td></tr><tr><td><strong>dataBlur</strong></td><td><code>Number</code></td><td>-</td><td>Data layer blurriness (passed through to the underlying renderer).</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">Removed Props</p><ul><li>Obsolete Props removed in <code>v0.0.5</code>: <code>initDelay</code>, <code>initHold</code>;</li></ul></div><h3 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h3><p>The component forwards all standard ECharts interaction events and map-specific logic events.</p><table tabindex="0"><thead><tr><th>Event Category</th><th>Event Name</th><th>Description</th></tr></thead><tbody><tr><td><strong>Interaction</strong></td><td><code>chartClick</code></td><td>Single click on map area or marker (commonly used for drill-down).</td></tr><tr><td></td><td><code>chartDblClick</code></td><td>Double click event.</td></tr><tr><td></td><td><code>chartMouseDown</code></td><td>Mouse button pressed.</td></tr><tr><td></td><td><code>chartMouseUp</code></td><td>Mouse button released.</td></tr><tr><td></td><td><code>chartMouseOver</code></td><td>Mouse hover (commonly used for highlight tips).</td></tr><tr><td></td><td><code>chartGlobalOut</code></td><td>Mouse leaves the chart container area.</td></tr><tr><td></td><td><code>chartGeoRoam</code></td><td>Map roam event (zoom/pan), commonly used to synchronize popup positions.</td></tr><tr><td><strong>Lifecycle</strong></td><td><code>chartInit</code></td><td>Instance initialization complete.</td></tr><tr><td></td><td><code>chartReady</code></td><td>Chart first render complete (including animation).</td></tr><tr><td></td><td><code>chartRendered</code></td><td>Triggered every time a render action occurs.</td></tr><tr><td></td><td><code>chartFinished</code></td><td>Triggered when rendering actions completely stop.</td></tr><tr><td><strong>Business</strong></td><td><code>chartUpdate</code></td><td>Chart update event.</td></tr><tr><td></td><td><code>chartTimelinechanged</code></td><td>Timeline node switching event.</td></tr><tr><td></td><td><code>breadcrumbClick</code></td><td>Triggered when breadcrumb navigation is clicked.</td></tr><tr><td></td><td><code>update:loading</code></td><td>Two-way binding update for loading state.</td></tr></tbody></table><h3 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to &quot;Methods&quot;">​</a></h3><p>Internal methods exposed by the component can be called via <code>ref</code>.</p><table tabindex="0"><thead><tr><th>Method Name</th><th>Arguments</th><th>Description</th></tr></thead><tbody><tr><td><strong><code>initChart</code></strong></td><td>-</td><td>Manually trigger the chart initialization process.</td></tr><tr><td><strong><code>setOption</code></strong></td><td><code>(option, notMerge, lazyUpdate)</code></td><td>Dynamically update chart configuration.</td></tr><tr><td><strong><code>getChart</code></strong></td><td>-</td><td>Get the raw ECharts instance object.</td></tr><tr><td><strong><code>resize</code></strong></td><td>-</td><td>Force trigger chart size redrawing.</td></tr><tr><td><strong><code>resetMapView</code></strong></td><td>-</td><td><strong>Specific Method</strong>: Reset map zoom ratio and center point to initial state.</td></tr><tr><td><strong><code>clear</code></strong></td><td>-</td><td>Clear the current instance canvas.</td></tr><tr><td><strong><code>dispose</code></strong></td><td>-</td><td>Destroy the instance and release resources.</td></tr></tbody></table>',52)),o(l(n))])}}});export{b as __pageData,f as default};
