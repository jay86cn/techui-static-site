import{_ as s,c as i,o as a,aj as l}from"./chunks/framework.DPdjieCD.js";const o=JSON.parse('{"title":"登录页面","description":"","frontmatter":{},"headers":[],"relativePath":"cn/_common/admin/login.md","filePath":"cn/_common/admin/login.md"}'),e={name:"cn/_common/admin/login.md"};function n(h,t,d,p,k,r){return a(),i("div",null,[...t[0]||(t[0]=[l(`<h1 id="登录页面" tabindex="-1">登录页面 <a class="header-anchor" href="#登录页面" aria-label="Permalink to &quot;登录页面&quot;">​</a></h1><p>TechUI 的工作台模块提供了一个高度封装的登录页面组件 <code>&lt;TuiLogin&gt;</code>。它不仅包含了完整的表单验证、加载状态管理和验证码逻辑，还支持灵活的布局定位和背景风格切换，帮助开发者在几分钟内搭建出美观的认证页面。</p><h2 id="组件特性" tabindex="-1">组件特性 <a class="header-anchor" href="#组件特性" aria-label="Permalink to &quot;组件特性&quot;">​</a></h2><ul><li><strong>布局灵活</strong>：支持表单在屏幕左侧、右侧或居中显示。</li><li><strong>背景丰富</strong>：可以调用TechUI矢量背景，也支持自定义图片背景。</li><li><strong>交互完整</strong>：集成了“忘记密码”、“帮助”等常用入口及加载中状态。</li><li><strong>高度定制</strong>：通过插槽机制，可以在登录框周边嵌入 Logo、主题切换器或装饰性面板（如科幻风格边框）。</li></ul><h2 id="基础用法" tabindex="-1">基础用法 <a class="header-anchor" href="#基础用法" aria-label="Permalink to &quot;基础用法&quot;">​</a></h2><p>在 <code>views/login.vue</code> 中引入并使用该组件：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { reactive, inject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useRouter } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue-router&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 注入全局服务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$tMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义表单数据引用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loginCfg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  form: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    username: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    password: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    captcha: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  loading: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  position: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;right&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 表单位置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  backgroundType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enableCaptcha: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 处理登录逻辑</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleLogin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">formData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  loginCfg.loading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 模拟 API 请求</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // await apiLogin(formData);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    $tMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;登录成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;success&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 执行带动画的路由跳转</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loginCfg.loading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiLogin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loginCfg&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleLogin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> #logo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiSystemLogo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="api-参考" tabindex="-1">API 参考 <a class="header-anchor" href="#api-参考" aria-label="Permalink to &quot;API 参考&quot;">​</a></h2><h3 id="属性-props" tabindex="-1">属性 (Props) <a class="header-anchor" href="#属性-props" aria-label="Permalink to &quot;属性 (Props)&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">属性名</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>form</strong></td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">(必填)</td><td style="text-align:left;">表单数据对象，必须包含 <code>username</code> 和 <code>password</code> 字段。</td></tr><tr><td style="text-align:left;"><strong>position</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;"><code>&#39;center&#39;</code></td><td style="text-align:left;">登录框在屏幕中的位置。可选值：<code>&#39;center&#39;</code>, <code>&#39;left&#39;</code>, <code>&#39;right&#39;</code>。</td></tr><tr><td style="text-align:left;"><strong>backgroundType</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;"><code>&#39;vector&#39;</code></td><td style="text-align:left;">背景渲染模式。可选值：<code>&#39;image&#39;</code> (图片), <code>&#39;gradient&#39;</code> (渐变), <code>&#39;vector&#39;</code> (矢量图形)。</td></tr><tr><td style="text-align:left;"><strong>backgroundImage</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">当 <code>backgroundType</code> 为 <code>&#39;image&#39;</code> 时的图片 URL 地址。</td></tr><tr><td style="text-align:left;"><strong>loading</strong></td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td><td style="text-align:left;">登录按钮是否处于加载状态。</td></tr><tr><td style="text-align:left;"><strong>enableCaptcha</strong></td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td><td style="text-align:left;">是否显示验证码输入框。</td></tr><tr><td style="text-align:left;"><strong>captchaImg</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;"><code>&#39;ERROR&#39;</code></td><td style="text-align:left;">验证码图片的 Base64 或 URL。</td></tr><tr><td style="text-align:left;"><strong>formSize</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;"><code>&#39;large&#39;</code></td><td style="text-align:left;">表单控件的尺寸。可选值：<code>&#39;small&#39;</code>, <code>&#39;default&#39;</code>, <code>&#39;large&#39;</code>。</td></tr><tr><td style="text-align:left;"><strong>rules</strong></td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td><td style="text-align:left;">自定义表单验证规则（兼容常见 UI 库的规则格式）。</td></tr><tr><td style="text-align:left;"><strong>usernamePlaceholder</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">用户名输入框的占位文本。</td></tr><tr><td style="text-align:left;"><strong>passwordPlaceholder</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">密码输入框的占位文本。</td></tr><tr><td style="text-align:left;"><strong>captchaPlaceholder</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">验证码输入框的占位文本。</td></tr><tr><td style="text-align:left;"><strong>loginButtonText</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">登录按钮的文本。</td></tr><tr><td style="text-align:left;"><strong>helpText</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">“帮助”链接的文本。</td></tr><tr><td style="text-align:left;"><strong>forgetText</strong></td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td><td style="text-align:left;">“忘记密码”链接的文本。</td></tr></tbody></table><h3 id="事件-events" tabindex="-1">事件 (Events) <a class="header-anchor" href="#事件-events" aria-label="Permalink to &quot;事件 (Events)&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">事件名</th><th style="text-align:left;">说明</th><th style="text-align:left;">回调参数</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>login</strong></td><td style="text-align:left;">当表单验证通过且用户点击登录按钮时触发。</td><td style="text-align:left;"><code>(formData: Object)</code></td></tr><tr><td style="text-align:left;"><strong>help</strong></td><td style="text-align:left;">用户点击“帮助”链接时触发。</td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;"><strong>forget</strong></td><td style="text-align:left;">用户点击“忘记密码”链接时触发。</td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;"><strong>validate</strong></td><td style="text-align:left;">表单验证完成时触发，返回验证结果。</td><td style="text-align:left;"><code>(result: Boolean)</code></td></tr><tr><td style="text-align:left;"><strong>captchaError</strong></td><td style="text-align:left;">当验证码校验逻辑（如有）失败时触发。</td><td style="text-align:left;">-</td></tr></tbody></table><h3 id="插槽-slots" tabindex="-1">插槽 (Slots) <a class="header-anchor" href="#插槽-slots" aria-label="Permalink to &quot;插槽 (Slots)&quot;">​</a></h3><p><code>&lt;TuiLogin&gt;</code> 提供了丰富的插槽用于扩展 UI：</p><ul><li><strong><code>#logo</code></strong>：用于放置系统 Logo，通常位于登录框顶部。</li><li><strong><code>#extra</code></strong>：用于放置额外的控制组件，如主题切换 (<code>TuiThemeToggle</code>) 或控制面板开关。</li><li><strong><code>#border</code></strong>：用于在登录框周围添加装饰性边框组件（例如 <code>ScifiPanelAlpha</code>），常用于构建科技感风格的登录页。</li></ul><h2 id="业务逻辑最佳实践" tabindex="-1">业务逻辑最佳实践 <a class="header-anchor" href="#业务逻辑最佳实践" aria-label="Permalink to &quot;业务逻辑最佳实践&quot;">​</a></h2><p>在 <code>handleLogin</code> 事件回调中，建议按照以下步骤处理业务逻辑：</p><ol><li><strong>开启 Loading</strong>：设置 <code>loading</code> 属性为 <code>true</code>。</li><li><strong>API 调用</strong>：发送用户名和密码到后端接口。</li><li><strong>状态写入</strong>： <ul><li>成功后，将 Token 和 UserID 写入全局状态 <code>$ADMIN.value.userInfo</code>。</li><li>TuiProvider的全局 <code>watch</code> 会自动将这些信息加密并持久化到本地存储。</li></ul></li><li><strong>菜单处理</strong>： <ul><li>如果是首次登录，可以手动获取菜单数据写入 <code>$ADMIN.value.menu</code>。</li><li>或者依赖全局 Provider 的自动恢复机制。</li></ul></li><li><strong>路由跳转</strong>： <ul><li>使用 <code>routerTransition</code> 进行跳转。</li><li>检查路由参数 <code>route.query.redirect</code>，如果存在则跳转回该地址，否则跳转至首页。</li></ul></li><li><strong>错误处理</strong>：如果 API 失败，关闭 <code>loading</code> 并显示错误提示。</li></ol>`,18)])])}const E=s(e,[["render",n]]);export{o as __pageData,E as default};
