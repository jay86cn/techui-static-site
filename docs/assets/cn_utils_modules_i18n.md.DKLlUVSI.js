import{_ as s,o as i,c as n,ah as t}from"./chunks/framework.PKn7PQPU.js";const c=JSON.parse('{"title":"多语言","description":"","frontmatter":{},"headers":[],"relativePath":"cn/utils/modules/i18n.md","filePath":"cn/utils/modules/i18n.md"}'),e={name:"cn/utils/modules/i18n.md"};function l(h,a,p,k,d,o){return i(),n("div",null,[...a[0]||(a[0]=[t(`<h1 id="多语言" tabindex="-1">多语言 <a class="header-anchor" href="#多语言" aria-label="Permalink to &quot;多语言&quot;">​</a></h1><p><strong>Multilingual 模块</strong> 提供了系统语言环境的侦测、锁定以及运行时语言包的管理能力。它是 <code>@techui/locales</code> 能够自动工作的底层逻辑支撑。</p><h2 id="引入方式" tabindex="-1">引入方式 <a class="header-anchor" href="#引入方式" aria-label="Permalink to &quot;引入方式&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { initLang, lockLang, tLang } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@techui/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="初始化与锁定" tabindex="-1">初始化与锁定 <a class="header-anchor" href="#初始化与锁定" aria-label="Permalink to &quot;初始化与锁定&quot;">​</a></h2><h3 id="initlang-val" tabindex="-1">initLang(val) <a class="header-anchor" href="#initlang-val" aria-label="Permalink to &quot;initLang(val)&quot;">​</a></h3><p>初始化或获取当前系统语言。</p><ul><li><strong>自动模式</strong> (<code>val</code> 为空): 会优先检查会话存储中是否已锁定语言。若未锁定，则通过 <code>Intl</code> API 或 <code>navigator.language</code> 自动侦测浏览器环境，并归一化为 <code>cn</code> (简中), <code>hk</code> (繁中/香港), <code>en</code> (英文) 等标准代码。</li><li><strong>手动模式</strong> (<code>val</code> 有值): 强制设置并锁定当前语言，等同于调用 <code>lockLang(val)</code>。</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 自动侦测并初始化</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> browserLang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initLang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 强制初始化为英文</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initLang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="locklang-lang" tabindex="-1">lockLang(lang) <a class="header-anchor" href="#locklang-lang" aria-label="Permalink to &quot;lockLang(lang)&quot;">​</a></h3><p>锁定语言偏好。</p><p>将目标语言代码写入 <code>SessionStorage</code>，并标记 <code>sysLangLock</code> 为 <code>true</code>。这确保了即便刷新页面或浏览器语言设置变更，用户的选择依然具有最高优先级。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用户点击切换语言时调用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lockLang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;jp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="资源管理" tabindex="-1">资源管理 <a class="header-anchor" href="#资源管理" aria-label="Permalink to &quot;资源管理&quot;">​</a></h2><p><strong>tLang</strong> 是一个 <code>I18nManager</code> 类的单例实例，负责在内存中暂存和管理当前加载的语言数据。</p><h3 id="tlang-register-config" tabindex="-1">tLang.register(config) <a class="header-anchor" href="#tlang-register-config" aria-label="Permalink to &quot;tLang.register(config)&quot;">​</a></h3><p>注册语言包。通常由 <code>@techui/locales</code> 中的各个语言包文件在被 import 时自动调用。</p><ul><li><strong>config</strong>: 包含 <code>value</code> (语言标识) 和 <code>data</code> (翻译数据) 的配置对象。</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tLang.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    welcome: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;欢迎使用&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    start: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;开始&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="tlang-getdata" tabindex="-1">tLang.getData() <a class="header-anchor" href="#tlang-getdata" aria-label="Permalink to &quot;tLang.getData()&quot;">​</a></h3><p>获取当前内存中已注册的语言翻译数据对象。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tLang.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(messages.welcome); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;欢迎使用&quot;</span></span></code></pre></div><h3 id="tlang-getvalue" tabindex="-1">tLang.getValue() <a class="header-anchor" href="#tlang-getvalue" aria-label="Permalink to &quot;tLang.getValue()&quot;">​</a></h3><p>获取当前已注册的语言代码标识（如 <code>cn</code>, <code>en</code>）。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> currentCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tLang.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="tlang-haslang" tabindex="-1">tLang.hasLang() <a class="header-anchor" href="#tlang-haslang" aria-label="Permalink to &quot;tLang.hasLang()&quot;">​</a></h3><p>检查内存中是否已存在有效的语言数据。常用于判断是否需要发起网络请求去动态加载语言包。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tLang.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasLang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 执行动态加载逻辑...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,28)])])}const g=s(e,[["render",l]]);export{c as __pageData,g as default};
