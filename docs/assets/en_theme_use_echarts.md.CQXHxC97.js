import{_ as i,c as a,o as e,aj as t}from"./chunks/framework.DPdjieCD.js";const k=JSON.parse('{"title":"ECharts Integration","description":"","frontmatter":{},"headers":[],"relativePath":"en/theme/use/echarts.md","filePath":"en/theme/use/echarts.md"}'),n={name:"en/theme/use/echarts.md"};function l(h,s,o,r,p,c){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="echarts-integration" tabindex="-1">ECharts Integration <a class="header-anchor" href="#echarts-integration" aria-label="Permalink to &quot;ECharts Integration&quot;">​</a></h1><p>TechUI&#39;s theme system is deeply integrated with ECharts. When ECharts features are enabled, the system automatically converts the color scheme (Colors) and font configuration (Fonts) of the current TechUI theme into a theme JSON that ECharts can recognize, and dynamically registers it.</p><p>This means you do not need to write complex style configurations for charts separately; all charts will automatically adapt to the current system theme (such as dark/light mode switching).</p><h2 id="enabling-the-function" tabindex="-1">Enabling the Function <a class="header-anchor" href="#enabling-the-function" aria-label="Permalink to &quot;Enabling the Function&quot;">​</a></h2><p>ECharts theme integration is enabled on demand. You need to set <code>features.echarts</code> to <code>true</code> during application initialization.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...other configurations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  features: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    echarts: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Enable ECharts integration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    admin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TechUIInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params);</span></span></code></pre></div><p>When this feature is enabled, <code>TuiProvider</code> automatically handles ECharts themes at the following times:</p><ol><li>When the application initializes.</li><li>When <code>themeToggle</code> is called to switch themes.</li></ol><h2 id="configuration-data-mapping" tabindex="-1">Configuration Data Mapping <a class="header-anchor" href="#configuration-data-mapping" aria-label="Permalink to &quot;Configuration Data Mapping&quot;">​</a></h2><p>The <code>chart</code> object in TechUI&#39;s theme files (such as <code>lightBlue.js</code>) is specifically used to control chart styles. The system maps these semantic variables to specific ECharts configuration items via an internal converter (<code>echartsTheme.js</code>).</p><p>The following is the correspondence between the <code>themeData.chart</code> structure and ECharts components:</p><h3 id="palette" tabindex="-1">Palette <a class="header-anchor" href="#palette" aria-label="Permalink to &quot;Palette&quot;">​</a></h3><p>Controls the default color sequence for basic charts such as bar charts, line charts, and pie charts.</p><ul><li><strong>Configuration Item</strong>: <code>chart.palette</code><ul><li><strong>Type</strong>: <code>Array</code> (Array of color values)</li><li><strong>Mapping Logic</strong>: The system automatically generates a richer gradient color scale based on the colors in the array using <code>$c.scale</code> and assigns it to the <code>color</code> attribute of ECharts.</li></ul></li></ul><h3 id="axis-lines" tabindex="-1">Axis &amp; Lines <a class="header-anchor" href="#axis-lines" aria-label="Permalink to &quot;Axis &amp; Lines&quot;">​</a></h3><p>Controls the styles of axes and grid lines for Cartesian coordinate systems (Grid) and Radar charts (Radar).</p><ul><li><strong>Configuration Item</strong>: <code>chart.line</code><ul><li><code>weak</code>: Used for split lines (SplitLine) or minor ticks.</li><li><code>base</code>: Used for axis lines (AxisLine) or major borders.</li><li><code>strong</code>: Used for gauge outer frames or emphasized lines.</li></ul></li></ul><h3 id="map-geo" tabindex="-1">Map &amp; Geo <a class="header-anchor" href="#map-geo" aria-label="Permalink to &quot;Map &amp; Geo&quot;">​</a></h3><p>Controls the fill, border, and interaction states of map areas.</p><ul><li><strong>Configuration Item</strong>: <code>chart.map</code><ul><li><code>bg</code> / <code>bd</code>: Background color and border color of the area in the normal state.</li><li><code>bg_hov</code> / <code>bd_hov</code>: Background and border in the highlighted (Emphasis) state.</li><li><code>bg_act</code> / <code>bd_act</code>: Background and border in the selected (Select) state.</li><li><code>fc</code>: Map label text color.</li><li><code>shadow</code>: Map shadow color.</li></ul></li></ul><h3 id="visualmap" tabindex="-1">VisualMap <a class="header-anchor" href="#visualmap" aria-label="Permalink to &quot;VisualMap&quot;">​</a></h3><p>Controls the gradient colors for heat maps or data ranges.</p><ul><li><strong>Configuration Item</strong>: <code>chart.visual</code></li><li><strong>Mapping Logic</strong>: Generates a 4-level color scale based on the configured start and end colors, and assigns it to <code>visualMap.color</code>.</li></ul><h2 id="internal-conversion-logic" tabindex="-1">Internal Conversion Logic <a class="header-anchor" href="#internal-conversion-logic" aria-label="Permalink to &quot;Internal Conversion Logic&quot;">​</a></h2><p>The system uses <code>echartsTheme.js</code> internally for conversion. It not only uses the <code>chart</code> object but also reuses other common variables in the theme to ensure high consistency between charts and the UI:</p><ul><li><strong>Background</strong>: Uses <code>common.bg</code> as the background color for Tooltips.</li><li><strong>Text</strong>: Uses <code>font.base</code> as the default color for chart titles, legends, and axis labels; uses <code>font.weak</code> as the subtitle color.</li><li><strong>Sci-Fi Elements</strong>: If the theme contains <code>scifi</code> configuration, the Timeline component will reference <code>scifi.hlite</code> and <code>scifi.focus</code> colors.</li></ul><h2 id="usage-in-projects" tabindex="-1">Usage in Projects <a class="header-anchor" href="#usage-in-projects" aria-label="Permalink to &quot;Usage in Projects&quot;">​</a></h2><h3 id="automatic-application" tabindex="-1">Automatic Application <a class="header-anchor" href="#automatic-application" aria-label="Permalink to &quot;Automatic Application&quot;">​</a></h3><p>If you are using chart components encapsulated by TechUI (such as <code>&lt;TuiChart&gt;</code> or <code>&lt;TuiMap&gt;</code>), they will automatically retrieve the current theme name and initialize.</p><h3 id="manual-initialization" tabindex="-1">Manual Initialization <a class="header-anchor" href="#manual-initialization" aria-label="Permalink to &quot;Manual Initialization&quot;">​</a></h3><p>If you use the ECharts native API directly, you can obtain the current theme name through the global configuration:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echarts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { inject, onMounted, ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// In the component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$globalConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chartRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // $globalConfig.theme is the theme name registered in ECharts (e.g., &#39;lightBlue&#39;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myChart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chartRef.value, $globalConfig.theme);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="responding-to-theme-switching" tabindex="-1">Responding to Theme Switching <a class="header-anchor" href="#responding-to-theme-switching" aria-label="Permalink to &quot;Responding to Theme Switching&quot;">​</a></h3><p>When the global theme switches, ECharts instances usually need to be destroyed and recreated or have their configuration reset. If you use <code>watch</code> to listen to <code>$gTheme</code>, please ensure you re-initialize the chart:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { watch } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$gTheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($gTheme, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newTheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (myChart) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dispose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Initialize with the new theme name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myChart </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chartRef.value, newTheme);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(option);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div>`,35)])])}const g=i(n,[["render",l]]);export{k as __pageData,g as default};
