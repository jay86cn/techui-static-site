import{_ as d,C as e,c as o,o as r,j as s,G as l,aj as h,a as i,w as p}from"./chunks/framework.DPdjieCD.js";const b=JSON.parse('{"title":"恐慌告警","description":"","frontmatter":{},"headers":[],"relativePath":"cn/_common/advanced/panicAlert.md","filePath":"cn/_common/advanced/panicAlert.md"}'),g={name:"cn/_common/advanced/panicAlert.md"};function k(c,t,E,y,u,f){const a=e("AbsTag"),n=e("Warning");return r(),o("div",null,[t[1]||(t[1]=s("h1",{id:"恐慌告警",tabindex:"-1"},[i("恐慌告警 "),s("a",{class:"header-anchor",href:"#恐慌告警","aria-label":'Permalink to "恐慌告警"'},"​")],-1)),l(a,{types:"adv star 1st"}),t[2]||(t[2]=s("p",null,[s("strong",null,"PanicAlert"),i(" 是一个用于侦测特定条件，触发绝对强提醒并执行“拒绝服务”策略的非常规组件。")],-1)),t[3]||(t[3]=s("p",null,"它并不用于日常的业务逻辑交互，而是用于系统级的异常处理。当侦测到环境不满足运行条件（如分辨率过低、非授权设备、恶意调试）或系统核心故障时，它会强制阻断用户操作，清空核心 DOM，直到环境恢复正常。",-1)),l(n,null,{default:p(()=>[...t[0]||(t[0]=[i("TuiPanicAlert 是组件库中7个高级组件之一，需要取得授权后使用。",-1)])]),_:1}),t[4]||(t[4]=h(`<div class="danger custom-block"><p class="custom-block-title">警告</p><p>请勿将此组件作为常规的“弹窗提示”或“消息通知”使用。PanicAlert 的设计初衷是 <strong>中断体验</strong> 和 <strong>拒绝服务</strong>。</p></div><h2 id="基础用法" tabindex="-1">基础用法 <a class="header-anchor" href="#基础用法" aria-label="Permalink to &quot;基础用法&quot;">​</a></h2><p>PanicAlert 通常放置在 <code>App.vue</code> 或布局组件的最外层。它通过 <code>silenceCondition</code> 属性来配置侦测规则。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiPanicAlert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    :silenceCondition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ device: &#39;pc,pad&#39; }&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="侦测模式详解" tabindex="-1">侦测模式详解 <a class="header-anchor" href="#侦测模式详解" aria-label="Permalink to &quot;侦测模式详解&quot;">​</a></h2><p>PanicAlert 支持 4 种模式。前三种（分辨率、设备、调试）通过 <code>silenceCondition</code> 对象自动触发，最后一种（自定义）通过手动控制。</p><h3 id="分辨率侦测-resolution" tabindex="-1">分辨率侦测 (Resolution) <a class="header-anchor" href="#分辨率侦测-resolution" aria-label="Permalink to &quot;分辨率侦测 (Resolution)&quot;">​</a></h3><p>用于限制系统运行的窗口尺寸范围。当浏览器窗口尺寸超出设定范围时，自动触发告警。</p><ul><li><strong>配置参数</strong>: <ul><li><code>resolutionH</code>: 横向分辨率范围 <code>{ min, max }</code>。</li><li><code>resolutionV</code>: 纵向分辨率范围 <code>{ min, max }</code>。</li></ul></li><li><strong>行为</strong>: 触发后阻断操作，用户调整窗口尺寸回到范围内后，告警自动解除。</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  silenceCondition: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 限制宽度在 1280 ~ 1920 之间</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 限制高度在 768 ~ 1080 之间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resolutionH: { min: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1280</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1920</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resolutionV: { min: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">768</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1080</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="设备侦测-device" tabindex="-1">设备侦测 (Device) <a class="header-anchor" href="#设备侦测-device" aria-label="Permalink to &quot;设备侦测 (Device)&quot;">​</a></h3><p>用于限制访问系统的设备类型。</p><ul><li><strong>配置参数</strong>: <code>device</code> (字符串)。</li><li><strong>可选值</strong>: <code>&#39;pc&#39;</code>, <code>&#39;pad&#39;</code>, <code>&#39;mobile&#39;</code>。支持多选，用逗号分隔。</li><li><strong>场景</strong>: 例如某些复杂的管理后台仅适配了 PC 端，禁止手机端访问以避免布局错乱或误操作。</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  silenceCondition: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 仅允许电脑和平板访问，手机访问将触发拒绝服务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    device: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pc,pad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="调试侦测-debug" tabindex="-1">调试侦测 (Debug) <a class="header-anchor" href="#调试侦测-debug" aria-label="Permalink to &quot;调试侦测 (Debug)&quot;">​</a></h3><p>用于保护系统安全或防止核心逻辑被分析。当检测到用户打开浏览器开发者工具（DevTools）时触发。</p><ul><li><strong>配置参数</strong>: <ul><li><code>rejectDebugEnv</code>: 生效环境。可选 <code>&#39;prod&#39;</code> (仅生产环境) 或 <code>&#39;all&#39;</code> (所有环境)。</li><li><code>debugMD5</code>: (可选) 调试白名单验证码。</li></ul></li><li><strong>激进策略</strong>: <ul><li>触发调试告警后，组件会<strong>强制清空页面主要 DOM 元素</strong>，防止通过 Elements 面板查看结构。</li><li>关闭调试工具后，页面会自动重载以恢复 DOM。</li></ul></li><li><strong>调试码 (Pass Code)</strong>: <ul><li>如果配置了 <code>debugMD5</code>，界面上会出现一个输入框。</li><li>输入正确的调试码后，可以跳过拦截，允许在该会话中进行调试。</li><li><strong>生成规则</strong>: <code>debugMD5</code> 必须是 <strong>至少12位</strong> 的明文密码经过 MD5 加密后生成的 32 位字符串。</li><li><strong>清理</strong>: 如需移除已输入的调试权限，需关闭标签页重开或手动清除 <code>sessionStorage</code>。</li></ul></li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  silenceCondition: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rejectDebugEnv: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 密码 &quot;passw0rd123456&quot; 的 MD5 值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    debugMD5: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;66a142122bfb65e2544f8231d6258f27&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="自定义模式-custom" tabindex="-1">自定义模式 (Custom) <a class="header-anchor" href="#自定义模式-custom" aria-label="Permalink to &quot;自定义模式 (Custom)&quot;">​</a></h3><p>用于业务逻辑判断出的严重错误（如核心数据加载失败、未授权访问等）。</p><ul><li><strong>控制方式</strong>: 通过 <code>v-model</code> (或 <code>show</code> 属性) 手动开启。</li><li><strong>内容配置</strong>: 通过 <code>title</code>, <code>content</code>, <code>icon</code> 自定义展示信息。</li><li><strong>清空 DOM</strong>: 可选开启 <code>clearDom</code> 属性。 <ul><li>开启后，触发告警时会清空页面 DOM。</li><li><strong>注意</strong>: 此时关闭告警会强制刷新页面（<code>location.reload()</code>），因为 DOM 已被销毁无法恢复。</li></ul></li></ul><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiPanicAlert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;isCriticalError&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;系统崩溃&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;核心服务连接超时，请联系管理员或稍后重试。&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    icon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tui-icon ti-alert-triangle&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;danger&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    :clearDom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="api-参考" tabindex="-1">API 参考 <a class="header-anchor" href="#api-参考" aria-label="Permalink to &quot;API 参考&quot;">​</a></h2><h3 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;Props&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">属性名</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>silenceCondition</strong></td><td style="text-align:left;">Object</td><td style="text-align:left;"><code>{}</code></td><td style="text-align:left;"><strong>核心配置</strong>。包含 <code>resolutionH/V</code>, <code>device</code>, <code>rejectDebugEnv</code>, <code>debugMD5</code> 等侦测条件。</td></tr><tr><td style="text-align:left;"><strong>modelValue</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>null</code></td><td style="text-align:left;">控制显示/隐藏（用于自定义模式）。</td></tr><tr><td style="text-align:left;"><strong>title</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">-</td><td style="text-align:left;">自定义模式的标题。</td></tr><tr><td style="text-align:left;"><strong>content</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">-</td><td style="text-align:left;">自定义模式的详情文本。</td></tr><tr><td style="text-align:left;"><strong>icon</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">-</td><td style="text-align:left;">自定义图标类名。</td></tr><tr><td style="text-align:left;"><strong>showClose</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>false</code></td><td style="text-align:left;">是否显示关闭按钮（侦测模式下通常不显示，除非配置允许回退）。</td></tr><tr><td style="text-align:left;"><strong>fallBackPath</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">-</td><td style="text-align:left;">设置后，界面会显示“返回”按钮，点击跳转至该路由路径。</td></tr><tr><td style="text-align:left;"><strong>clearDom</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>false</code></td><td style="text-align:left;"><strong>高危</strong>。触发时是否清空 <code>#app</code> 下的 DOM 节点。</td></tr><tr><td style="text-align:left;"><strong>blur</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>true</code></td><td style="text-align:left;">是否对背景应用高斯模糊。</td></tr><tr><td style="text-align:left;"><strong>type</strong></td><td style="text-align:left;">String</td><td style="text-align:left;"><code>&#39;danger&#39;</code></td><td style="text-align:left;">主题色类型：<code>primary</code>, <code>danger</code>, <code>warning</code> 等。</td></tr><tr><td style="text-align:left;"><strong>tone</strong></td><td style="text-align:left;">String</td><td style="text-align:left;"><code>&#39;strong&#39;</code></td><td style="text-align:left;">视觉色调强度：<code>strong</code>, <code>strongInvert</code> 等。</td></tr><tr><td style="text-align:left;"><strong>modal</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>true</code></td><td style="text-align:left;">是否显示遮罩层。</td></tr><tr><td style="text-align:left;"><strong>transparent</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>false</code></td><td style="text-align:left;">是否启用半透明背景。</td></tr><tr><td style="text-align:left;"><strong>backgroundBlur</strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;"><code>true</code></td><td style="text-align:left;">是否启用背景模糊效果。</td></tr></tbody></table><h3 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">事件名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>open</strong></td><td style="text-align:left;">告警窗口打开时触发。</td></tr><tr><td style="text-align:left;"><strong>close</strong></td><td style="text-align:left;">告警窗口关闭时触发。</td></tr><tr><td style="text-align:left;"><strong>back</strong></td><td style="text-align:left;">点击“返回”或“退出”按钮时触发。</td></tr><tr><td style="text-align:left;"><strong>update:modelValue</strong></td><td style="text-align:left;">双向绑定更新。</td></tr></tbody></table><h3 id="silencecondition-配置项详解" tabindex="-1">silenceCondition 配置项详解 <a class="header-anchor" href="#silencecondition-配置项详解" aria-label="Permalink to &quot;silenceCondition 配置项详解&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">键名</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>resolutionH</strong></td><td style="text-align:left;"><code>{min, max}</code></td><td style="text-align:left;">横向分辨率限制。</td></tr><tr><td style="text-align:left;"><strong>resolutionV</strong></td><td style="text-align:left;"><code>{min, max}</code></td><td style="text-align:left;">纵向分辨率限制。</td></tr><tr><td style="text-align:left;"><strong>device</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">允许的设备类型，逗号分隔 (<code>pc,pad,mobile</code>)。</td></tr><tr><td style="text-align:left;"><strong>rejectDebugEnv</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">拒绝调试的环境 (<code>prod</code>, <code>all</code>)。</td></tr><tr><td style="text-align:left;"><strong>debugMD5</strong></td><td style="text-align:left;">String</td><td style="text-align:left;">调试白名单 MD5 校验码。</td></tr></tbody></table>`,29))])}const m=d(g,[["render",k]]);export{b as __pageData,m as default};
