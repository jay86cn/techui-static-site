import{_ as o,c as t,o as a,aj as r}from"./chunks/framework.DPdjieCD.js";const m=JSON.parse('{"title":"工作台总结","description":"","frontmatter":{},"headers":[],"relativePath":"cn/_common/admin/summary.md","filePath":"cn/_common/admin/summary.md"}'),i={name:"cn/_common/admin/summary.md"};function n(l,e,c,d,s,u){return a(),t("div",null,[...e[0]||(e[0]=[r('<h1 id="工作台总结" tabindex="-1">工作台总结 <a class="header-anchor" href="#工作台总结" aria-label="Permalink to &quot;工作台总结&quot;">​</a></h1><h2 id="核心架构设计" tabindex="-1">核心架构设计 <a class="header-anchor" href="#核心架构设计" aria-label="Permalink to &quot;核心架构设计&quot;">​</a></h2><p>工作台（Admin）是 TechUI 的高级特性模块，采用 <strong>数据驱动</strong> + <strong>全局拦截</strong> 的设计模式。</p><ul><li><strong>入口控制</strong>：必须在 <code>TechUIInit</code> 中配置 <code>features: { admin: true }</code> 才能激活 <code>$ADMIN</code> 全局服务。</li><li><strong>状态管理</strong>：核心状态挂载在 <code>$tState.ADMIN</code> 下，包含 <code>userInfo</code>（用户信息）、<code>menu</code>（菜单树）、<code>componentRegister</code>（组件注册表）等。</li><li><strong>持久化</strong>：系统自动将敏感数据（Token）同步至 Session/LocalStorage，将大数据量（菜单）同步至 IndexedDB，防止刷新丢失。</li></ul><h2 id="关键模块机制" tabindex="-1">关键模块机制 <a class="header-anchor" href="#关键模块机制" aria-label="Permalink to &quot;关键模块机制&quot;">​</a></h2><h3 id="a-动态路由-dynamic-router" tabindex="-1">A. 动态路由 (Dynamic Router) <a class="header-anchor" href="#a-动态路由-dynamic-router" aria-label="Permalink to &quot;A. 动态路由 (Dynamic Router)&quot;">​</a></h3><p>系统不使用静态路由表，而是根据后端返回的菜单数据动态生成。</p><ul><li><strong>加载时机</strong>：在全局路由守卫 <code>router.beforeEach</code> 中触发。</li><li><strong>生成逻辑</strong>： <ol><li>检查 <code>$ARouterInited</code> 状态。</li><li>若未初始化，读取 <code>$AMenu</code>（或从 IndexedDB 恢复）。</li><li>遍历菜单，通过 <code>register.js</code> 匹配组件。</li><li>使用 <code>router.addRoute(&#39;layout&#39;, ...)</code> 挂载子路由。</li></ol></li><li><strong>异常处理</strong>：遇到 404 或路由未找到，通常是 <code>register.js</code> 缺失配置或 IndexedDB 缓存未更新。</li></ul><h3 id="b-组件注册-component-register" tabindex="-1">B. 组件注册 (Component Register) <a class="header-anchor" href="#b-组件注册-component-register" aria-label="Permalink to &quot;B. 组件注册 (Component Register)&quot;">​</a></h3><p>为了解决构建工具（Vite/Webpack）对动态 import 的路径限制，采用“预注册”模式。</p><ul><li><strong>文件位置</strong>：通常位于 <code>src/navigation/register.js</code>。</li><li><strong>映射规则</strong>：<code>Key</code>（路由标识） -&gt; <code>Value</code>（<code>() =&gt; import(&#39;path&#39;)</code>）。</li><li><strong>全局注入</strong>：必须在 <code>main.js</code> 或 <code>App.vue</code> 中将其赋值给 <code>$ADMIN.value.componentRegister</code>。</li></ul><h3 id="c-布局系统-layout" tabindex="-1">C. 布局系统 (Layout) <a class="header-anchor" href="#c-布局系统-layout" aria-label="Permalink to &quot;C. 布局系统 (Layout)&quot;">​</a></h3><p>标准布局由 <code>&lt;TuiAdminLayout&gt;</code> 提供，通常包裹在 <code>&lt;TuiAdaptive&gt;</code> 中。</p><ul><li><strong>结构</strong>：Logo区 + 侧边菜单 + 顶部 Tab + 内容区 + 底部辅助栏（Assist）。</li><li><strong>辅助栏</strong>：<code>assist.vue</code> 是侧边栏底部的功能区，负责头像显示、消息通知、设置和注销逻辑。</li><li><strong>缓存</strong>：内置 <code>KeepAlive</code>，通过路由 <code>meta.keepAlive</code> 自动管理 <code>$AKeepAlive</code> 列表。</li></ul><h3 id="d-登录鉴权-login" tabindex="-1">D. 登录鉴权 (Login) <a class="header-anchor" href="#d-登录鉴权-login" aria-label="Permalink to &quot;D. 登录鉴权 (Login)&quot;">​</a></h3><ul><li><strong>组件</strong>：<code>&lt;TuiLogin&gt;</code> 提供标准 UI，支持矢量/图片背景和表单验证。</li><li><strong>流程</strong>： <ol><li>调用 API 获取 Token 和 UserID。</li><li>写入 <code>$ADMIN.value.userInfo</code>。</li><li>（可选）拉取菜单写入 <code>$ADMIN.value.menu</code>。</li><li>使用 <code>routerTransition</code> 跳转。</li></ol></li></ul><h2 id="快速启动测试用例" tabindex="-1">快速启动测试用例 <a class="header-anchor" href="#快速启动测试用例" aria-label="Permalink to &quot;快速启动测试用例&quot;">​</a></h2><p>看文档太繁琐了？</p><p>深有同感，所以可以直接下载测试用例以及最小启动工程，来直接进入开发，了解前面章节的概念后直接上手即可。</p><p><strong>测试用例&amp;快速启动</strong></p><ul><li>中国大陆 <a href="https://gitee.com/ayin86/techui-prime" target="_blank" rel="noreferrer">Gitee</a></li><li>其他地区 <a href="https://github.com/aYin86cn/techui-prime" target="_blank" rel="noreferrer">Github</a></li></ul>',21)])])}const h=o(i,[["render",n]]);export{m as __pageData,h as default};
