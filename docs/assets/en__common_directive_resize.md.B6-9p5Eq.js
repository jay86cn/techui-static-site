import{_ as i,o as a,c as e,ah as t}from"./chunks/framework.PKn7PQPU.js";const c=JSON.parse('{"title":"Resize Observer Directive","description":"","frontmatter":{},"headers":[],"relativePath":"en/_common/directive/resize.md","filePath":"en/_common/directive/resize.md"}'),n={name:"en/_common/directive/resize.md"};function l(h,s,p,r,d,o){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="resize-observer-directive" tabindex="-1">Resize Observer Directive <a class="header-anchor" href="#resize-observer-directive" aria-label="Permalink to &quot;Resize Observer Directive&quot;">​</a></h1><p><code>v-tui-resize</code> is a high-performance size monitoring directive provided by TechUI. It is based on the browser&#39;s native <code>ResizeObserver</code> API and can capture changes in an element&#39;s width and height in real-time. Compared to using the native API directly, this directive provides a more convenient declarative syntax, automatically handles the mounting and destruction of listeners, and has a built-in throttling mechanism to optimize performance.</p><h2 id="core-features" tabindex="-1">Core Features <a class="header-anchor" href="#core-features" aria-label="Permalink to &quot;Core Features&quot;">​</a></h2><ul><li><strong>Declarative Call:</strong> No need to manually instantiate <code>ResizeObserver</code>; bind directly in the template.</li><li><strong>Performance Optimization:</strong> Built-in <code>duration</code> configuration to prevent page stuttering caused by high-frequency triggering (default 200ms).</li><li><strong>Dynamic Control:</strong> Supports dynamically enabling or pausing monitoring via the <code>disabled</code> property.</li><li><strong>Automatic Destruction:</strong> Automatically disconnects observation when the component is unmounted to prevent memory leaks.</li></ul><h2 id="basic-usage" tabindex="-1">Basic Usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to &quot;Basic Usage&quot;">​</a></h2><h3 id="simple-mode-callback-only" tabindex="-1">Simple Mode (Callback Only) <a class="header-anchor" href="#simple-mode-callback-only" aria-label="Permalink to &quot;Simple Mode (Callback Only)&quot;">​</a></h3><p>If you only need to monitor changes without extra configuration, you can pass a callback function directly. The callback function will receive an object containing <code>{ width, height }</code>.</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleResize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Current size:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, width, height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;box&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-tui-resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleResize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Resize Me</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="configuration-mode-object-parameters" tabindex="-1">Configuration Mode (Object Parameters) <a class="header-anchor" href="#configuration-mode-object-parameters" aria-label="Permalink to &quot;Configuration Mode (Object Parameters)&quot;">​</a></h3><p>By passing an object, you can configure throttle time, disabled state, or component ID.</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chart-container&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-tui-resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      callback: updateChart, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      duration: 500,       // Set a throttle delay of 500ms</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      disabled: isHidden   // Stop monitoring when element is hidden to save resources</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="api-reference" tabindex="-1">API Reference <a class="header-anchor" href="#api-reference" aria-label="Permalink to &quot;API Reference&quot;">​</a></h2><p><code>v-tui-resize</code> accepts a <strong>Function</strong> or an <strong>Object</strong>. When an object is passed, it supports the following properties:</p><table tabindex="0"><thead><tr><th>Parameter Name</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong>callback</strong></td><td><strong>Callback Function</strong>. Triggered when size changes; parameter is <code>{ width, height }</code>.</td><td><code>Function</code></td><td>—</td></tr><tr><td><strong>disabled</strong></td><td><strong>Disable Switch</strong>. When set to <code>true</code>, the listener will be disconnected. Supports dynamic switching.</td><td><code>Boolean</code></td><td><code>false</code></td></tr><tr><td><strong>duration</strong></td><td><strong>Throttle Time</strong>. The minimum interval (ms) between two callback triggers, used to reduce high-frequency rendering overhead.</td><td><code>Number</code></td><td><code>200</code></td></tr><tr><td><strong>uid</strong></td><td><strong>Unique Identifier</strong>. Used by the internal <code>tResize</code> utility library to distinguish instances; usually generated automatically.</td><td><code>String</code></td><td><code>genUid(&#39;vResize&#39;)</code></td></tr><tr><td><strong>cid</strong></td><td><strong>Component ID</strong>. Used for component validity verification (<code>cidVaild</code>) within the TechUI core system.</td><td><code>String</code></td><td>—</td></tr></tbody></table><h2 id="typical-cases" tabindex="-1">Typical Cases <a class="header-anchor" href="#typical-cases" aria-label="Permalink to &quot;Typical Cases&quot;">​</a></h2><h3 id="adaptive-container" tabindex="-1">Adaptive Container <a class="header-anchor" href="#adaptive-container" aria-label="Permalink to &quot;Adaptive Container&quot;">​</a></h3><p>In TechUI&#39;s large-screen adaptation solution, it is necessary to monitor container size changes to calculate the scaling ratio. Here, <code>uid</code> is used to ensure instance uniqueness.</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tuiAdpt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tui-adpt-container&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-tui-resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      callback: adptResizeCounter, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      uid: &#39;adpt-main-observer&#39; </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="scroll-update" tabindex="-1">Scroll Update <a class="header-anchor" href="#scroll-update" aria-label="Permalink to &quot;Scroll Update&quot;">​</a></h3><p>In custom scrollbar components, when the content area size changes (e.g., more data is loaded), the scrollbar length needs to be recalculated. Via the dynamic <code>disabled</code> property, observation can be paused when monitoring is not needed (e.g., when initialization is incomplete).</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tui-scroller-outer&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-tui-resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      callback: initSize,           // Reset scrollbar when size changes</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      disabled: !inited,            // Do not listen before initialization</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      duration: 100                 // Improve response speed</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="technical-details" tabindex="-1">Technical Details <a class="header-anchor" href="#technical-details" aria-label="Permalink to &quot;Technical Details&quot;">​</a></h2><h3 id="lifecycle-management" tabindex="-1">Lifecycle Management <a class="header-anchor" href="#lifecycle-management" aria-label="Permalink to &quot;Lifecycle Management&quot;">​</a></h3><ul><li><strong>Mounted:</strong> Parses configuration, creates <code>uid</code>, and calls <code>tResize.o</code> (Observe) to start monitoring if not disabled.</li><li><strong>Updated:</strong> Compares old and new <code>disabled</code> states. If changing from <code>false</code> to <code>true</code>, calls <code>tResize.d</code> (Disconnect) to stop monitoring; otherwise, reconnects.</li><li><strong>Unmounted:</strong> Forcibly calls <code>stopResize</code> to clear all observers, ensuring no residue.</li></ul><h3 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h3><p>This directive depends on TechUI&#39;s utility library:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { tResize, genUid, tType } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@techui/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><ul><li><strong>tResize:</strong> A core utility class encapsulating <code>ResizeObserver</code>, responsible for handling specific DOM observations and callback dispatching.</li><li><strong>genUid:</strong> Generates unique IDs.</li></ul>`,28)])])}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
