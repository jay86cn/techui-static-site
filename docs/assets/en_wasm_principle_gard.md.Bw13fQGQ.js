import{_ as t,o as i,c as n,ah as o}from"./chunks/framework.PKn7PQPU.js";const m=JSON.parse('{"title":"Guard Verification","description":"","frontmatter":{},"headers":[],"relativePath":"en/wasm/principle/gard.md","filePath":"en/wasm/principle/gard.md"}'),r={name:"en/wasm/principle/gard.md"};function a(s,e,c,d,l,h){return i(),n("div",null,[...e[0]||(e[0]=[o('<h1 id="guard-verification" tabindex="-1">Guard Verification <a class="header-anchor" href="#guard-verification" aria-label="Permalink to &quot;Guard Verification&quot;">‚Äã</a></h1><p><strong>Guard (Wasm Guard)</strong> is an active monitoring subsystem running within the TechUI Wasm core.</p><p>If &quot;anti-tampering&quot; is the system&#39;s passive defense baseline, then &quot;Guard Verification&quot; is the system&#39;s active compliance check. It is responsible for high-frequency validation of whether the current environment meets the various constraints defined by the license during runtime, ensuring that components operate in a legal and secure state.</p><h2 id="license-compliance" tabindex="-1">License Compliance <a class="header-anchor" href="#license-compliance" aria-label="Permalink to &quot;License Compliance&quot;">‚Äã</a></h2><p>The Guard strictly compares the current operating environment against the configured license parameters (refer to the [Decryption Process] chapter) item by item.</p><h3 id="üìÖ-expiration-check" tabindex="-1">üìÖ Expiration Check <a class="header-anchor" href="#üìÖ-expiration-check" aria-label="Permalink to &quot;üìÖ Expiration Check&quot;">‚Äã</a></h3><p>The Guard&#39;s validation strategy for expiration depends on the license type:</p><ul><li><strong>Official Licenses</strong>: For official licenses such as <strong>Project / Company / Commerce</strong>, the <code>expDate</code> defaults to <code>endless</code> (permanent). The Guard <strong>will not</strong> block these licenses due to expiration.</li><li><strong>Development Licenses</strong>: This is the <strong>only</strong> license type with a mandatory deadline. The Guard checks if the current system time has exceeded the end time defined by the development license. Once expired, components will stop running and prompt you to purchase an official authorization.</li><li><strong>Temporary Experience Keys</strong>: When free version users use a &quot;Temporary Key&quot; to unlock advanced components, the Guard initiates countdown monitoring. Once timed out, the component will automatically trigger a circuit break or downgrade back to the free state.</li></ul><h3 id="üîí-project-title-lock" tabindex="-1">üîí Project Title Lock <a class="header-anchor" href="#üîí-project-title-lock" aria-label="Permalink to &quot;üîí Project Title Lock&quot;">‚Äã</a></h3><p>When <strong>Project Binding</strong> is enabled in the license, the Guard initiates a strict title monitoring mechanism:</p><ul><li><strong>Consistency Check</strong>: Detects whether the browser title <code>document.title</code> contains the <code>project</code> name specified in the license.</li><li><strong>Hijack Countermeasures</strong>: To prevent malicious code from deceiving the check by hijacking the <code>document.title</code> property via <code>Object.defineProperty</code>, the Guard inspects the property descriptor.</li><li><em>Note: Normal business code does not need to rewrite the title property&#39;s Setter/Getter. Detection of non-native property definitions will be treated as an attack.</em></li></ul><h3 id="üåê-domain-environment-binding" tabindex="-1">üåê Domain/Environment Binding <a class="header-anchor" href="#üåê-domain-environment-binding" aria-label="Permalink to &quot;üåê Domain/Environment Binding&quot;">‚Äã</a></h3><ul><li><strong>Logic</strong>: If the license is configured with <code>domainBind</code> or <code>localOnly</code>, the Guard validates <code>window.location.hostname</code>.</li><li><strong>Scenario</strong>: Primarily used to restrict &quot;localized deployment&quot; authorizations from being illegally deployed to public network environments.</li></ul><h2 id="runtime-integrity-check" tabindex="-1">Runtime Integrity Check <a class="header-anchor" href="#runtime-integrity-check" aria-label="Permalink to &quot;Runtime Integrity Check&quot;">‚Äã</a></h2><p>In addition to validating the license, the Guard ensures that its own running foundation (the browser environment) has not been compromised.</p><h3 id="üß¨-native-method-integrity" tabindex="-1">üß¨ Native Method Integrity <a class="header-anchor" href="#üß¨-native-method-integrity" aria-label="Permalink to &quot;üß¨ Native Method Integrity&quot;">‚Äã</a></h3><p>TechUI&#39;s Wasm module relies on certain native browser APIs for communication and rendering. The Guard detects whether these key methods have been tampered with or hooked by third-party scripts during startup and runtime.</p><ul><li><strong>Monitoring Targets</strong>: Includes but is not limited to <code>console</code> methods, <code>setTimeout/setInterval</code> timers, and <code>fetch</code> request methods.</li><li><strong>Judgment Criteria</strong>: Checks if these functions are <code>[native code]</code> to prevent malicious code from injecting hooks to intercept or forge data.</li></ul><h3 id="üìù-signature-integrity" tabindex="-1">üìù Signature Integrity <a class="header-anchor" href="#üìù-signature-integrity" aria-label="Permalink to &quot;üìù Signature Integrity&quot;">‚Äã</a></h3><ul><li><strong>Logic</strong>: TechUI injects a comment node containing an authorization summary at specific locations in the DOM structure (such as the end of <code>&lt;head&gt;</code> or <code>&lt;body&gt;</code>).</li><li><strong>Monitoring</strong>: The Guard periodically checks for the existence of this signature node. Manual removal of this node is considered a violation of intellectual property display and will trigger a circuit break.</li></ul><h2 id="trigger-mechanism" tabindex="-1">Trigger Mechanism <a class="header-anchor" href="#trigger-mechanism" aria-label="Permalink to &quot;Trigger Mechanism&quot;">‚Äã</a></h2><p>Guard verification does not occupy main thread resources at all times; instead, it employs a hybrid strategy of &quot;event-driven + low-frequency polling&quot;.</p><table tabindex="0"><thead><tr><th>Trigger Method</th><th>Description</th><th>Frequency</th></tr></thead><tbody><tr><td><strong>Initialization Self-test</strong></td><td>The first full check during component loading.</td><td>1 time / lifecycle</td></tr><tr><td><strong>Advanced Invocation</strong></td><td>Triggered when code calls advanced components (e.g., 3D scenes).</td><td>Triggered as needed</td></tr><tr><td><strong>Heartbeat Polling</strong></td><td>Low-frequency status confirmation using the Wasm internal timer.</td><td>Extremely low frequency (no impact on performance)</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">‚ö†Ô∏è Developer Note</p><p>To avoid false positives, please do not <strong>override</strong> native browser object methods (such as <code>Date</code>, <code>setTimeout</code>) or use hacking techniques to hijack DOM properties in your business code. These actions may be misjudged by the Guard as an insecure environment.</p></div>',24)])])}const g=t(r,[["render",a]]);export{m as __pageData,g as default};
