import{_ as i,c as s,o as n,aj as e}from"./chunks/framework.DPdjieCD.js";const d=JSON.parse('{"title":"Initialization Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"en/i18n/start/initialization.md","filePath":"en/i18n/start/initialization.md"}'),t={name:"en/i18n/start/initialization.md"};function l(o,a,h,p,r,c){return n(),s("div",null,[...a[0]||(a[0]=[e(`<h1 id="initialization-configuration" tabindex="-1">Initialization Configuration <a class="header-anchor" href="#initialization-configuration" aria-label="Permalink to &quot;Initialization Configuration&quot;">​</a></h1><p>TechUI&#39;s multi-language system relies on the global service <code>TuiService</code> for initialization. In most cases, there is no need to manually write complex loading logic, as the system automatically adapts the most appropriate language package based on the environment.</p><h2 id="automatic-initialization" tabindex="-1">Automatic Initialization <a class="header-anchor" href="#automatic-initialization" aria-label="Permalink to &quot;Automatic Initialization&quot;">​</a></h2><p>When the application starts and calls <code>TechUIInit</code>, the internal <code>initI18n</code> method is executed automatically. The default workflow is as follows:</p><ol><li><strong>Language Detection</strong>: Calls <code>getSysLang()</code> to determine the target language (e.g., <code>&#39;cn&#39;</code>). This function prioritizes reading configurations from local storage, falling back to the browser&#39;s environment language.</li><li><strong>Cache Check</strong>: Uses <code>tLang.load()</code> to check if language data already exists in memory.</li><li><strong>Dynamic Loading</strong>: <ul><li><strong>If no data exists</strong>: Dynamically imports the corresponding language package file (e.g., <code>@techui/locales/cn</code>) based on the target language.</li><li><strong>If data exists</strong>: Skips dynamic loading and uses the existing data (usually occurring when a language pack is manually imported).</li></ul></li><li><strong>State Mounting</strong>: Mounts the final language data to the global reactive state <code>$tState.locale</code> for component use.</li></ol><h3 id="code-example" tabindex="-1">Code Example <a class="header-anchor" href="#code-example" aria-label="Permalink to &quot;Code Example&quot;">​</a></h3><p>Under normal circumstances, you only need to initialize TechUI as usual without extra code:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TechUIInit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;techui-prime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... other configurations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// initI18n() is called internally automatically</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TechUIInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params);</span></span></code></pre></div><h2 id="manual-import" tabindex="-1">Manual Import <a class="header-anchor" href="#manual-import" aria-label="Permalink to &quot;Manual Import&quot;">​</a></h2><p>In specific scenarios, such as intranet environments where dynamic imports are unavailable or when a specific language pack must be bundled into the main bundle, you can explicitly import the language pack in your entry file.</p><p><strong>Mechanism</strong>: When you explicitly <code>import</code> a language pack, that file internally calls <code>tLang.register</code> to store the data in memory. Since <code>initI18n</code> detects that the data is already present, it will not initiate a network request.</p><p><strong>Usage Example</strong>:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Force the English pack, disabling auto-detection</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@techui/locales/en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TechUIInit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;techui-prime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Initialization will directly use the English data imported above</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TechUIInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><p><strong>Note</strong>: Manual imports increase the size of the main bundle. Unless necessary, the default asynchronous loading method is recommended.</p><h2 id="language-locking" tabindex="-1">Language Locking <a class="header-anchor" href="#language-locking" aria-label="Permalink to &quot;Language Locking&quot;">​</a></h2><p>TechUI provides matching utility functions to handle active language switching and preference memory for users.</p><h3 id="locking-language-locklang" tabindex="-1">Locking Language (lockLang) <a class="header-anchor" href="#locking-language-locklang" aria-label="Permalink to &quot;Locking Language (lockLang)&quot;">​</a></h3><p>When a user switches languages in the interface, the <code>lockLang</code> function should be called. This function writes the selected language code (such as <code>&#39;en&#39;</code>) into the browser&#39;s LocalStorage.</p><p><strong>Function Signature</strong>: <code>lockLang(lang: &#39;cn&#39; | &#39;hk&#39; | &#39;en&#39;)</code></p><h3 id="getting-system-language-getsyslang" tabindex="-1">Getting System Language (getSysLang) <a class="header-anchor" href="#getting-system-language-getsyslang" aria-label="Permalink to &quot;Getting System Language (getSysLang)&quot;">​</a></h3><p>During initialization, the system uses this function to decide which language to load based on the following priority:</p><ol><li><strong>LocalStorage</strong>: Checks for records written by <code>lockLang</code>.</li><li><strong>Navigator</strong>: Checks the browser&#39;s <code>navigator.language</code>.</li><li><strong>Default</strong>: Returns <code>&#39;cn&#39;</code> by default.</li></ol><h3 id="full-switching-logic" tabindex="-1">Full Switching Logic <a class="header-anchor" href="#full-switching-logic" aria-label="Permalink to &quot;Full Switching Logic&quot;">​</a></h3><p>Since TechUI does not support hot-reloading for multiple languages, the standard switching process is: <strong>Lock Language -&gt; Refresh Page</strong>.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { lockLang } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@techui/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleLanguageChange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">langCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 1. Write user selection to local storage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  lockLang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(langCode);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 2. Refresh page to trigger initI18n to re-read configuration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    location.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>Following this method, after the page refreshes, <code>initI18n</code> will read the latest local configuration via <code>getSysLang</code> and load the user-selected language pack.</p>`,26)])])}const k=i(t,[["render",l]]);export{d as __pageData,k as default};
