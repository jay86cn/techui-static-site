import{_ as e,o as s,c as l,ah as a}from"./chunks/framework.PKn7PQPU.js";const p=JSON.parse('{"title":"提供者","description":"","frontmatter":{},"headers":[],"relativePath":"cn/_common/start/provider.md","filePath":"cn/_common/start/provider.md"}'),i={name:"cn/_common/start/provider.md"};function n(d,t,o,r,g,h){return s(),l("div",null,[...t[0]||(t[0]=[a(`<h1 id="提供者" tabindex="-1">提供者 <a class="header-anchor" href="#提供者" aria-label="Permalink to &quot;提供者&quot;">​</a></h1><p><code>&lt;TuiProvider&gt;</code> 是 <strong>TechUI</strong> 组件库的顶层组件，它扮演着全局状态、服务、配置和核心功能的统一提供者（Provider）角色。您需要在应用的最外层使用此组件来确保所有 <strong>TechUI</strong> 功能的正常运行和全局配置的生效。</p><h2 id="组件功能概览" tabindex="-1">组件功能概览 <a class="header-anchor" href="#组件功能概览" aria-label="Permalink to &quot;组件功能概览&quot;">​</a></h2><p>此组件是应用的核心入口，主要负责以下功能：</p><ul><li><strong>全局状态与服务注入：</strong> 通过 Vue <code>provide</code> 机制，将 <code>$tService</code>、消息通知、遮罩、加载状态等核心服务和状态注入到所有子组件。</li><li><strong>主题与样式管理：</strong> 监听全局主题 (<code>$gTheme</code>, <code>$gThemeScheme</code>) 变化，实时更新 <code>body</code> 上的 CSS 类名，并初始化 <strong>Echarts</strong> 主题。</li><li><strong>视图和路由转场动画：</strong> 封装了 <code>routerTransition</code> 和 <code>themeToggle</code> 方法，提供带有转场动画的路由跳转和主题切换能力。</li><li><strong>路由拦截与权限控制 (Admin Features)：</strong> 在启用 <strong>Admin Features</strong> 时，负责路由初始化、动态添加、登录验证和菜单数据持久化（通过 IndexedDB）。</li><li><strong>系统事件处理：</strong> 监听键盘事件（F11 全屏切换、Esc 计数）和文档点击事件。</li><li><strong>设备信息感知：</strong> 初始化并监听设备信息（如屏幕方向、分辨率、是否可触摸）。</li><li><strong>硬/软重启：</strong> 提供了 <code>softReload</code> (软重启) 和 <code>hardReload</code> (硬重启) 方法。</li></ul><h2 id="如何使用" tabindex="-1">如何使用 <a class="header-anchor" href="#如何使用" aria-label="Permalink to &quot;如何使用&quot;">​</a></h2><p>将 <code>&lt;TuiProvider&gt;</code> 放置在您的 Vue 根组件（如 <code>App.vue</code>）的内部，通常围绕着 <code>&lt;router-view&gt;</code> 或应用主体内容。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">router-view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">TuiProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// 无需通过import导入TuiProvider，已通过main.js全局导入，直接使用即可。</span></span></code></pre></div><h2 id="核心提供的能力" tabindex="-1">核心提供的能力 <a class="header-anchor" href="#核心提供的能力" aria-label="Permalink to &quot;核心提供的能力&quot;">​</a></h2><p>组件通过 <code>provide(&#39;$global&#39;, ...)</code> 向其所有后代组件提供了完整的全局上下文。在任何子组件中，您都可以通过以下方式获取：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> global</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者解构使用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$tMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">routerTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$tState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>以下是所有可注入对象的详细列表：</p><h3 id="全局交互与反馈组件-ui-feedback" tabindex="-1">全局交互与反馈组件 (UI Feedback) <a class="header-anchor" href="#全局交互与反馈组件-ui-feedback" aria-label="Permalink to &quot;全局交互与反馈组件 (UI Feedback)&quot;">​</a></h3><p>这部分包含了系统内所有的弹窗、提示和遮罩服务及其对应的关闭方法。</p><table tabindex="0"><thead><tr><th style="text-align:left;">服务名称</th><th style="text-align:left;">关闭/销毁方法</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>$tMessage</code></strong></td><td style="text-align:left;"><code>$tMessageCloseAll</code></td><td style="text-align:left;">消息提醒</td></tr><tr><td style="text-align:left;"><strong><code>$tNotify</code></strong></td><td style="text-align:left;"><code>$tNotifyCloseAll</code></td><td style="text-align:left;">通知提醒</td></tr><tr><td style="text-align:left;"><strong><code>$tToast</code></strong></td><td style="text-align:left;"><code>$tToastClose</code></td><td style="text-align:left;">轻量提醒</td></tr><tr><td style="text-align:left;"><strong><code>$tLoading</code></strong></td><td style="text-align:left;"><code>$tLoadingClose</code></td><td style="text-align:left;">全局加载中状态</td></tr><tr><td style="text-align:left;"><strong><code>$tMask</code></strong></td><td style="text-align:left;"><code>$tMaskClose</code></td><td style="text-align:left;">全局遮罩层（用于模态或阻止操作）</td></tr><tr><td style="text-align:left;"><strong><code>$tPopover</code></strong></td><td style="text-align:left;"><code>$tPopoverCloaseAll</code></td><td style="text-align:left;">气泡弹窗服务</td></tr><tr><td style="text-align:left;"><strong><code>$tFlash</code></strong></td><td style="text-align:left;"><code>$tFlashClose</code></td><td style="text-align:left;">闪烁提醒</td></tr><tr><td style="text-align:left;"><strong><code>$tAttentionDispatcher</code></strong></td><td style="text-align:left;"><code>$tAttentionDispatcherClose</code></td><td style="text-align:left;">提醒调度器</td></tr></tbody></table><h3 id="路由与导航辅助-routing" tabindex="-1">路由与导航辅助 (Routing) <a class="header-anchor" href="#路由与导航辅助-routing" aria-label="Permalink to &quot;路由与导航辅助 (Routing)&quot;">​</a></h3><p>提供了增强的路由操作能力，特别是针对参数处理和转场动画。</p><table tabindex="0"><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>routerTransition</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;"><strong>核心方法</strong>。执行带有视图转场动画的路由跳转。支持自动判断前进/后退方向。</td></tr><tr><td style="text-align:left;"><strong><code>updateRouteQuery</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;">更新当前路由的 Query 参数，支持 <code>push</code> 或 <code>replace</code> 模式。</td></tr><tr><td style="text-align:left;"><strong><code>getRouteQuery</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;">获取路由参数。不传参返回所有；传字符串返回单个；传数组返回多个。</td></tr></tbody></table><h3 id="系统控制与状态-system-control" tabindex="-1">系统控制与状态 (System &amp; Control) <a class="header-anchor" href="#系统控制与状态-system-control" aria-label="Permalink to &quot;系统控制与状态 (System &amp; Control)&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>$tState</code></strong></td><td style="text-align:left;">Object</td><td style="text-align:left;"><strong>核心状态树</strong>。包含 <code>globalConfig</code>、<code>deviceInfo</code>、<code>themePalette</code> 等响应式数据。</td></tr><tr><td style="text-align:left;"><strong><code>$tBus</code></strong></td><td style="text-align:left;">Object</td><td style="text-align:left;">全局事件总线（Event Bus），用于跨组件通信。</td></tr><tr><td style="text-align:left;"><strong><code>$tService</code></strong></td><td style="text-align:left;">Object</td><td style="text-align:left;">包含所有工具函数的集合对象</td></tr><tr><td style="text-align:left;"><strong><code>themeToggle</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;">切换主题配色，并自动触发主题切换转场动画。</td></tr><tr><td style="text-align:left;"><strong><code>softReload</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;"><strong>软重启</strong>。在不刷新浏览器的情况下重置自适应配置和部分状态。</td></tr><tr><td style="text-align:left;"><strong><code>hardReload</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;"><strong>硬重启</strong>。直接调用 <code>window.location.reload()</code>。</td></tr><tr><td style="text-align:left;"><strong><code>logout</code></strong></td><td style="text-align:left;">Function</td><td style="text-align:left;"><strong>注销</strong>。清理用户数据、Token 及 IndexedDB，并跳转至登录页（仅在 <code>isActAdminFeatures</code> 为真时存在）。</td></tr><tr><td style="text-align:left;"><strong><code>proxy</code></strong></td><td style="text-align:left;">Object</td><td style="text-align:left;">当前组件实例的 Proxy 对象（通常用于访问 Vue 全局属性）。</td></tr></tbody></table><h3 id="功能特性开关-feature-flags" tabindex="-1">功能特性开关 (Feature Flags) <a class="header-anchor" href="#功能特性开关-feature-flags" aria-label="Permalink to &quot;功能特性开关 (Feature Flags)&quot;">​</a></h3><p>用于判断当前系统启用了哪些模块集。（业务开发中通常无需判断）</p><table tabindex="0"><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>isActAdminFeatures</code></strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;">是否启用了后台管理特性（路由权限、菜单、登录拦截）。</td></tr><tr><td style="text-align:left;"><strong><code>isActEchartsFeatures</code></strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;">是否启用了 Echarts 图表支持及主题自动注册。</td></tr><tr><td style="text-align:left;"><strong><code>isActAdvFeatures</code></strong></td><td style="text-align:left;">Boolean</td><td style="text-align:left;">是否启用了高级特性（具体指代项目内定义的高级功能集）。</td></tr></tbody></table>`,23)])])}const y=e(i,[["render",n]]);export{p as __pageData,y as default};
